{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{toast}from'react-toastify';import{Link,useRoute}from'wouter';import{setURL,Icon}from'@instinct-web/core';import{Row}from'../../../components/generic/row/Row';import{UserLayout}from'../../../components/layout/user';import{Card}from'../../../components/generic/card/Card';import{EditPoliticalParty}from'./edit-party/EditParty';import{politicalPartyService}from'../../../services/political-party';import{Container}from'../../../components/generic/container/Container';import{MiniJumbotron}from'../../../components/generic/mini-jumbotron/MiniJumbotron';import{useFetchPoliticalPartyByID}from'../../../hooks/political-party/fetch-political-party-by-id';setURL('government/parties/edit/:partyID',/*#__PURE__*/React.createElement(PartyEditor,null));export function PartyEditor(){var _useRoute=useRoute('/government/parties/edit/:partyID'),_useRoute2=_slicedToArray(_useRoute,2),matched=_useRoute2[0],params=_useRoute2[1];var politicalParty=useFetchPoliticalPartyByID(params.partyID);function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(politicalPartyDTO){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return politicalPartyService.updateByID(politicalParty.id,politicalPartyDTO);case 3:toast.success(\"Your changes have been saved to \".concat(politicalPartyDTO.name));_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);toast.error(\"Failed to update \".concat(politicalParty.name));case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return _onSubmit.apply(this,arguments);}var basePoliticalPartyDTO=politicalParty&&{name:politicalParty.name,description:politicalParty.description,about:politicalParty.about,badge:politicalParty.badge,ideology:politicalParty.ideology};return/*#__PURE__*/React.createElement(UserLayout,{section:\"games_ranking\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(Link,{to:\"/government/parties/view/\".concat(politicalParty===null||politicalParty===void 0?void 0:politicalParty.id)},/*#__PURE__*/React.createElement(Icon,{className:\"fa-4x text-white\",style:{cursor:'pointer'},type:\"caret-left\"})))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(MiniJumbotron,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Political Party Registration Form\"),/*#__PURE__*/React.createElement(\"p\",null,\"This form is required under Section (x) of the Elections Act, 2021.\")))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(Card,null,basePoliticalPartyDTO&&/*#__PURE__*/React.createElement(EditPoliticalParty,{basePoliticalPartyDTO:basePoliticalPartyDTO,onSubmit:onSubmit}))))));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/government/parties/PartyEditor.tsx"],"names":["React","toast","Link","useRoute","setURL","Icon","Row","UserLayout","Card","EditPoliticalParty","politicalPartyService","Container","MiniJumbotron","useFetchPoliticalPartyByID","PartyEditor","matched","params","politicalParty","partyID","onSubmit","politicalPartyDTO","updateByID","id","success","name","error","basePoliticalPartyDTO","description","about","badge","ideology","cursor"],"mappings":"4bAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,OAAQC,IAAR,CAAcC,QAAd,KAA6B,QAA7B,CACA,OAAQC,MAAR,CAAgBC,IAAhB,KAA2B,oBAA3B,CACA,OAAQC,GAAR,KAAkB,qCAAlB,CACA,OAAQC,UAAR,KAAyB,iCAAzB,CACA,OAAQC,IAAR,KAAmB,uCAAnB,CACA,OAAQC,kBAAR,KAAiC,wBAAjC,CAEA,OAAQC,qBAAR,KAAoC,mCAApC,CACA,OAAQC,SAAR,KAAwB,iDAAxB,CACA,OAAQC,aAAR,KAA4B,0DAA5B,CACA,OAAQC,0BAAR,KAAyC,4DAAzC,CAEAT,MAAM,CAAC,kCAAD,cAAqC,oBAAC,WAAD,MAArC,CAAN,CAEA,MAAO,SAASU,CAAAA,WAAT,EAAuB,CAC5B,cAA0BX,QAAQ,CAChC,mCADgC,CAAlC,wCAAOY,OAAP,eAAgBC,MAAhB,eAGA,GAAMC,CAAAA,cAAc,CAAGJ,0BAA0B,CAACG,MAAM,CAAEE,OAAT,CAAjD,CAJ4B,QAMbC,CAAAA,QANa,oIAM5B,iBAAwBC,iBAAxB,wJAEUV,CAAAA,qBAAqB,CAACW,UAAtB,CACJJ,cAAc,CAAEK,EADZ,CAEJF,iBAFI,CAFV,QAMInB,KAAK,CAACsB,OAAN,2CACqCH,iBAAiB,CAACI,IADvD,GANJ,8EAUIvB,KAAK,CAACwB,KAAN,4BAAgCR,cAAc,CAAEO,IAAhD,GAVJ,mEAN4B,2CAoB5B,GAAME,CAAAA,qBAAoD,CACxDT,cAAc,EAAI,CAChBO,IAAI,CAAEP,cAAc,CAACO,IADL,CAEhBG,WAAW,CAAEV,cAAc,CAACU,WAFZ,CAGhBC,KAAK,CAAEX,cAAc,CAACW,KAHN,CAIhBC,KAAK,CAAEZ,cAAc,CAACY,KAJN,CAKhBC,QAAQ,CAAEb,cAAc,CAACa,QALT,CADpB,CASA,mBACE,oBAAC,UAAD,EAAY,OAAO,CAAC,eAApB,eACE,oBAAC,SAAD,mBACE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,IAAD,EAAM,EAAE,oCAA8Bb,cAA9B,SAA8BA,cAA9B,iBAA8BA,cAAc,CAAEK,EAA9C,CAAR,eACE,oBAAC,IAAD,EACE,SAAS,CAAC,kBADZ,CAEE,KAAK,CAAE,CAACS,MAAM,CAAE,SAAT,CAFT,CAGE,IAAI,CAAC,YAHP,EADF,CADF,CADF,CADF,cAYE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,aAAD,mBACE,kEADF,cAEE,mGAFF,CADF,CADF,CAZF,cAuBE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,IAAD,MACGL,qBAAqB,eACpB,oBAAC,kBAAD,EACE,qBAAqB,CAAEA,qBADzB,CAEE,QAAQ,CAAEP,QAFZ,EAFJ,CADF,CADF,CAvBF,CADF,CADF,CAwCD","sourcesContent":["import React from 'react';\nimport {toast} from 'react-toastify';\nimport {Link, useRoute} from 'wouter';\nimport {setURL, Icon} from '@instinct-web/core';\nimport {Row} from '../../../components/generic/row/Row';\nimport {UserLayout} from '../../../components/layout/user';\nimport {Card} from '../../../components/generic/card/Card';\nimport {EditPoliticalParty} from './edit-party/EditParty';\nimport {PoliticalPartyDTO} from '@instinct-plugin/roleplay-types';\nimport {politicalPartyService} from '../../../services/political-party';\nimport {Container} from '../../../components/generic/container/Container';\nimport {MiniJumbotron} from '../../../components/generic/mini-jumbotron/MiniJumbotron';\nimport {useFetchPoliticalPartyByID} from '../../../hooks/political-party/fetch-political-party-by-id';\n\nsetURL('government/parties/edit/:partyID', <PartyEditor />);\n\nexport function PartyEditor() {\n  const [matched, params] = useRoute<{partyID: string}>(\n    '/government/parties/edit/:partyID'\n  );\n  const politicalParty = useFetchPoliticalPartyByID(params!.partyID);\n\n  async function onSubmit(politicalPartyDTO: PoliticalPartyDTO) {\n    try {\n      await politicalPartyService.updateByID(\n        politicalParty!.id,\n        politicalPartyDTO\n      );\n      toast.success(\n        `Your changes have been saved to ${politicalPartyDTO.name}`\n      );\n    } catch {\n      toast.error(`Failed to update ${politicalParty!.name}`);\n    }\n  }\n\n  const basePoliticalPartyDTO: PoliticalPartyDTO | undefined =\n    politicalParty && {\n      name: politicalParty.name,\n      description: politicalParty.description,\n      about: politicalParty.about,\n      badge: politicalParty.badge,\n      ideology: politicalParty.ideology,\n    };\n\n  return (\n    <UserLayout section=\"games_ranking\">\n      <Container>\n        <Row>\n          <div className=\"col-12\">\n            <Link to={`/government/parties/view/${politicalParty?.id}`}>\n              <Icon\n                className=\"fa-4x text-white\"\n                style={{cursor: 'pointer'}}\n                type=\"caret-left\"\n              />\n            </Link>\n          </div>\n        </Row>\n        <Row>\n          <div className=\"col-12\">\n            <MiniJumbotron>\n              <h1>Political Party Registration Form</h1>\n              <p>\n                This form is required under Section (x) of the Elections Act,\n                2021.\n              </p>\n            </MiniJumbotron>\n          </div>\n        </Row>\n        <Row>\n          <div className=\"col-12\">\n            <Card>\n              {basePoliticalPartyDTO && (\n                <EditPoliticalParty\n                  basePoliticalPartyDTO={basePoliticalPartyDTO}\n                  onSubmit={onSubmit}\n                />\n              )}\n            </Card>\n          </div>\n        </Row>\n      </Container>\n    </UserLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}