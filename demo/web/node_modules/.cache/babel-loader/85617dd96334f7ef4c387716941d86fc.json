{"ast":null,"code":"import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Link}from'wouter';import{Col}from'reactstrap';import React,{useContext,useState}from'react';import{Row}from'../../components/generic/row/Row';import{Card}from'../../components/generic/card/Card';import{UserLayout}from'../../components/layout/user';import{useFetchAllBusinesses}from'../../hooks/business';import{BusinessCard}from'../../components/templates/business-card';import{Container}from'../../components/generic/container/Container';import{RPPermissionGuard}from'../../components/templates/permission-guard';import{MiniJumbotron}from'../../components/generic/mini-jumbotron/MiniJumbotron';import{configContext,Icon,Input,sessionContext,setURL}from'@instinct-web/core';setURL('business',/*#__PURE__*/React.createElement(BusinessHub,null));export function BusinessHub(){var _businesses$filter,_businesses$filter2,_businesses$length;var _useContext=useContext(configContext),config=_useContext.config;var _useContext2=useContext(sessionContext),user=_useContext2.user;var businesses=useFetchAllBusinesses();var ownedBusinesses=(_businesses$filter=businesses===null||businesses===void 0?void 0:businesses.filter(function(_){return _.owner.id===user.id;}))!==null&&_businesses$filter!==void 0?_businesses$filter:[];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],setFilter=_useState2[1];var filteredBusinesses=(_businesses$filter2=businesses===null||businesses===void 0?void 0:businesses.filter(function(_){return _.name.toLowerCase().includes(filter);}))!==null&&_businesses$filter2!==void 0?_businesses$filter2:[];return/*#__PURE__*/React.createElement(UserLayout,null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(MiniJumbotron,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Business Hub\"),/*#__PURE__*/React.createElement(\"p\",null,\"Elevate your career to the next level\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"},/*#__PURE__*/React.createElement(RPPermissionGuard,{permission:\"websiteCreateBusiness\",redirect:false},/*#__PURE__*/React.createElement(Link,{to:\"/business/creator\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success btn-lg\"},/*#__PURE__*/React.createElement(Icon,{type:\"plus-circle\"}),\"Create A Business\")))))))),ownedBusinesses.length>0&&/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(MiniJumbotron,null,/*#__PURE__*/React.createElement(\"h3\",null,\"My Businesses\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row p-2\",style:{marginTop:-15}},ownedBusinesses.map(function(_){return/*#__PURE__*/React.createElement(Link,{key:_.id,to:\"/businesses/\".concat(_.id)},/*#__PURE__*/React.createElement(\"div\",{className:\"d-inline\"},/*#__PURE__*/React.createElement(\"img\",{className:\"business-badge mr-3\",src:\"\".concat(config.swfBadgeURL,\"/\").concat(_.badge,\".gif\"),style:{height:60,width:60},onError:function onError(event){return event.target.style.display='none';}})));}))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-4\"},/*#__PURE__*/React.createElement(Input,{value:filter,name:\"business_filter\",placeholder:\"Search businesses...\",type:\"text\",onChange:function onChange(key,value){return setFilter(value.toLowerCase());}}))),/*#__PURE__*/React.createElement(Row,null,filteredBusinesses===null||filteredBusinesses===void 0?void 0:filteredBusinesses.map(function(_){return/*#__PURE__*/React.createElement(Col,{key:_.id,xs:6},/*#__PURE__*/React.createElement(BusinessCard,{business:_}));})),((_businesses$length=businesses===null||businesses===void 0?void 0:businesses.length)!==null&&_businesses$length!==void 0?_businesses$length:0)>0&&filteredBusinesses.length===0&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(Card,{className:\"text-center\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-exclamation-circle fa-5x\"}),/*#__PURE__*/React.createElement(\"h3\",null,\"No businesses match your criteria\"))),(businesses===null||businesses===void 0?void 0:businesses.length)===0&&/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(Card,{className:\"text-center\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-exclamation-circle fa-5x\"}),/*#__PURE__*/React.createElement(\"h3\",null,\"There aren't any businesses to show at this time.\"))))));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/business/BusinessHub.tsx"],"names":["Link","Col","React","useContext","useState","Row","Card","UserLayout","useFetchAllBusinesses","BusinessCard","Container","RPPermissionGuard","MiniJumbotron","configContext","Icon","Input","sessionContext","setURL","BusinessHub","config","user","businesses","ownedBusinesses","filter","_","owner","id","setFilter","filteredBusinesses","name","toLowerCase","includes","length","marginTop","map","swfBadgeURL","badge","height","width","event","target","style","display","key","value"],"mappings":"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","sourcesContent":["import {Link} from 'wouter';\nimport {Col} from 'reactstrap';\nimport React, {useContext, useState} from 'react';\nimport {Row} from '../../components/generic/row/Row';\nimport {Card} from '../../components/generic/card/Card';\nimport {UserLayout} from '../../components/layout/user';\nimport {useFetchAllBusinesses} from '../../hooks/business';\nimport {BusinessCard} from '../../components/templates/business-card';\nimport {Container} from '../../components/generic/container/Container';\nimport {RPPermissionGuard} from '../../components/templates/permission-guard';\nimport {MiniJumbotron} from '../../components/generic/mini-jumbotron/MiniJumbotron';\n\nimport {\n  configContext,\n  Icon,\n  Input,\n  sessionContext,\n  setURL,\n} from '@instinct-web/core';\n\nsetURL('business', <BusinessHub />);\n\nexport function BusinessHub() {\n  const {config} = useContext(configContext);\n  const {user} = useContext(sessionContext);\n  const businesses = useFetchAllBusinesses();\n  const ownedBusinesses =\n    businesses?.filter(_ => _.owner.id === user!.id) ?? [];\n  const [filter, setFilter] = useState('');\n\n  const filteredBusinesses =\n    businesses?.filter(_ => _.name.toLowerCase().includes(filter)) ?? [];\n\n  return (\n    <UserLayout>\n      <Container>\n        <Row>\n          <div className=\"col-12\">\n            <MiniJumbotron>\n              <div className=\"row\">\n                <div className=\"col-6\">\n                  <h1>Business Hub</h1>\n                  <p>Elevate your career to the next level</p>\n                </div>\n                <div className=\"col-6 text-right\">\n                  <RPPermissionGuard\n                    permission=\"websiteCreateBusiness\"\n                    redirect={false}\n                  >\n                    <Link to=\"/business/creator\">\n                      <button className=\"btn btn-success btn-lg\">\n                        <Icon type=\"plus-circle\" />\n                        Create A Business\n                      </button>\n                    </Link>\n                  </RPPermissionGuard>\n                </div>\n              </div>\n            </MiniJumbotron>\n          </div>\n        </Row>\n        {ownedBusinesses.length > 0 && (\n          <Row>\n            <div className=\"col-12\">\n              <MiniJumbotron>\n                <h3>My Businesses</h3>\n                <div className=\"row p-2\" style={{marginTop: -15}}>\n                  {ownedBusinesses.map(_ => (\n                    <Link key={_.id} to={`/businesses/${_.id}`}>\n                      <div className=\"d-inline\">\n                        <img\n                          className=\"business-badge mr-3\"\n                          src={`${config.swfBadgeURL}/${_.badge}.gif`}\n                          style={{height: 60, width: 60}}\n                          onError={(event: any) =>\n                            (event.target.style.display = 'none')\n                          }\n                        />\n                      </div>\n                    </Link>\n                  ))}\n                </div>\n              </MiniJumbotron>\n            </div>\n          </Row>\n        )}\n        <Row>\n          <div className=\"col-12 mb-4\">\n            <Input\n              value={filter}\n              name=\"business_filter\"\n              placeholder=\"Search businesses...\"\n              type=\"text\"\n              onChange={(key, value) => setFilter(value.toLowerCase())}\n            />\n          </div>\n        </Row>\n        <Row>\n          {filteredBusinesses?.map(_ => (\n            <Col key={_.id} xs={6}>\n              <BusinessCard business={_} />\n            </Col>\n          ))}\n        </Row>\n        {(businesses?.length ?? 0) > 0 && filteredBusinesses.length === 0 && (\n          <div className=\"col-12\">\n            <Card className=\"text-center\">\n              <i className=\"fa fa-exclamation-circle fa-5x\" />\n              <h3>No businesses match your criteria</h3>\n            </Card>\n          </div>\n        )}\n        {businesses?.length === 0 && (\n          <Row>\n            <div className=\"col-12\">\n              <Card className=\"text-center\">\n                <i className=\"fa fa-exclamation-circle fa-5x\" />\n                <h3>There aren't any businesses to show at this time.</h3>\n              </Card>\n            </div>\n          </Row>\n        )}\n      </Container>\n    </UserLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}