{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Icon}from'@instinct-web/core';import{lawService}from'../../../../../services/law';import{LawVoteStatus}from'@instinct-plugin/roleplay-types';import{Modal,ModalBody,ModalFooter,ModalHeader}from'reactstrap';import{RPPermissionGuard}from'../../../../../components/templates/permission-guard';export function VoteOnLawModal(_ref){var children=_ref.children,law=_ref.law,vote=_ref.vote,onFinish=_ref.onFinish;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),spinner=_useState2[0],setSpinner=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];function toggleModal(){setIsOpen(function(_){return!_;});}function onConfirm(){return _onConfirm.apply(this,arguments);}function _onConfirm(){_onConfirm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setSpinner(true);_context.next=4;return lawService.voteByID(law.id,{status:vote});case 4:onFinish();case 5:_context.prev=5;setSpinner(false);return _context.finish(5);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,,5,8]]);}));return _onConfirm.apply(this,arguments);}return/*#__PURE__*/React.createElement(RPPermissionGuard,{permission:\"websiteVoteOnLaws\"},/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen,toggle:toggleModal},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggleModal},\"Confirmation\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"h3\",null,\"Are You Sure?\"),/*#__PURE__*/React.createElement(\"p\",null,\"You are about to vote\",' ',vote===LawVoteStatus.Approved?'aye':'nay',\" on A-\",law.id,' ',law.title),/*#__PURE__*/React.createElement(\"p\",null,\"Upon confirmation, your vote will be permanently saved and publicly available.\")),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(\"span\",{onClick:toggleModal},\"Cancel\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-success ml-2\",disabled:spinner,onClick:onConfirm},spinner?/*#__PURE__*/React.createElement(Icon,{className:\"fa-spin\",type:\"spinner\"}):'Confirm'))),/*#__PURE__*/React.createElement(\"div\",{onClick:toggleModal},children));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/government/laws/law-actions/vote-on-law-modal/VoteOnLawModal.tsx"],"names":["React","useState","Icon","lawService","LawVoteStatus","Modal","ModalBody","ModalFooter","ModalHeader","RPPermissionGuard","VoteOnLawModal","children","law","vote","onFinish","spinner","setSpinner","isOpen","setIsOpen","toggleModal","_","onConfirm","voteByID","id","status","Approved","title"],"mappings":"4bAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAAQC,IAAR,KAAmB,oBAAnB,CACA,OAAQC,UAAR,KAAyB,6BAAzB,CAEA,OAAQC,aAAR,KAA4B,iCAA5B,CACA,OAAQC,KAAR,CAAeC,SAAf,CAA0BC,WAA1B,CAAuCC,WAAvC,KAAyD,YAAzD,CACA,OAAQC,iBAAR,KAAgC,sDAAhC,CAEA,MAAO,SAASC,CAAAA,cAAT,MAKiB,IAJtBC,CAAAA,QAIsB,MAJtBA,QAIsB,CAHtBC,GAGsB,MAHtBA,GAGsB,CAFtBC,IAEsB,MAFtBA,IAEsB,CADtBC,QACsB,MADtBA,QACsB,CACtB,cAA8Bb,QAAQ,CAAC,KAAD,CAAtC,wCAAOc,OAAP,eAAgBC,UAAhB,eACA,eAA4Bf,QAAQ,CAAC,KAAD,CAApC,yCAAOgB,MAAP,eAAeC,SAAf,eAEA,QAASC,CAAAA,WAAT,EAA6B,CAC3BD,SAAS,CAAC,SAAAE,CAAC,QAAI,CAACA,CAAL,EAAF,CAAT,CACD,CANqB,QAQPC,CAAAA,SARO,qIAQtB,mJAEIL,UAAU,CAAC,IAAD,CAAV,CAFJ,sBAGUb,CAAAA,UAAU,CAACmB,QAAX,CAAoBV,GAAG,CAACW,EAAxB,CAA6B,CAACC,MAAM,CAAEX,IAAT,CAA7B,CAHV,QAIIC,QAAQ,GAJZ,uBAMIE,UAAU,CAAC,KAAD,CAAV,CANJ,gGARsB,4CAkBtB,mBACE,oBAAC,iBAAD,EAAmB,UAAU,CAAC,mBAA9B,eACE,oBAAC,KAAD,EAAO,MAAM,CAAEC,MAAf,CAAuB,MAAM,CAAEE,WAA/B,eACE,oBAAC,WAAD,EAAa,MAAM,CAAEA,WAArB,iBADF,cAEE,oBAAC,SAAD,mBACE,8CADF,cAEE,qDACwB,GADxB,CAEGN,IAAI,GAAKT,aAAa,CAACqB,QAAvB,CAAkC,KAAlC,CAA0C,KAF7C,UAE0Db,GAAG,CAACW,EAF9D,CAEkE,GAFlE,CAGGX,GAAG,CAACc,KAHP,CAFF,cAOE,8GAPF,CAFF,cAcE,oBAAC,WAAD,mBACE,4BAAM,OAAO,CAAEP,WAAf,WADF,cAEE,8BACE,SAAS,CAAC,8BADZ,CAEE,QAAQ,CAAEJ,OAFZ,CAGE,OAAO,CAAEM,SAHX,EAKGN,OAAO,cAAG,oBAAC,IAAD,EAAM,SAAS,CAAC,SAAhB,CAA0B,IAAI,CAAC,SAA/B,EAAH,CAAiD,SAL3D,CAFF,CAdF,CADF,cA0BE,2BAAK,OAAO,CAAEI,WAAd,EAA4BR,QAA5B,CA1BF,CADF,CA8BD","sourcesContent":["import React, {useState} from 'react';\nimport {Icon} from '@instinct-web/core';\nimport {lawService} from '../../../../../services/law';\nimport {VoteOnLawModalProps} from './VoteOnLawModal.types';\nimport {LawVoteStatus} from '@instinct-plugin/roleplay-types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\nimport {RPPermissionGuard} from '../../../../../components/templates/permission-guard';\n\nexport function VoteOnLawModal({\n  children,\n  law,\n  vote,\n  onFinish,\n}: VoteOnLawModalProps) {\n  const [spinner, setSpinner] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n\n  function toggleModal(): void {\n    setIsOpen(_ => !_);\n  }\n\n  async function onConfirm() {\n    try {\n      setSpinner(true);\n      await lawService.voteByID(law.id!, {status: vote});\n      onFinish();\n    } finally {\n      setSpinner(false);\n    }\n  }\n\n  return (\n    <RPPermissionGuard permission=\"websiteVoteOnLaws\">\n      <Modal isOpen={isOpen} toggle={toggleModal}>\n        <ModalHeader toggle={toggleModal}>Confirmation</ModalHeader>\n        <ModalBody>\n          <h3>Are You Sure?</h3>\n          <p>\n            You are about to vote{' '}\n            {vote === LawVoteStatus.Approved ? 'aye' : 'nay'} on A-{law.id}{' '}\n            {law.title}\n          </p>\n          <p>\n            Upon confirmation, your vote will be permanently saved and publicly\n            available.\n          </p>\n        </ModalBody>\n        <ModalFooter>\n          <span onClick={toggleModal}>Cancel</span>\n          <button\n            className=\"btn btn-outline-success ml-2\"\n            disabled={spinner}\n            onClick={onConfirm}\n          >\n            {spinner ? <Icon className=\"fa-spin\" type=\"spinner\" /> : 'Confirm'}\n          </button>\n        </ModalFooter>\n      </Modal>\n      <div onClick={toggleModal}>{children}</div>\n    </RPPermissionGuard>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}