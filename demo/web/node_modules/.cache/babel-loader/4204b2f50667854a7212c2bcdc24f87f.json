{"ast":null,"code":"import _defineProperty from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Link}from'wouter';import{Row}from'reactstrap';import React,{useContext}from'react';import{Icon,sessionContext}from'@instinct-web/core';import{VoteOnLawModal}from'./vote-on-law-modal/VoteOnLawModal';import{OpenVotingModal}from'./open-voting-modal/OpenVotingModal';import{DismissLawModal}from'./dismiss-law-modal/DismissLawModal';import{LawStatus,LawVoteStatus}from'@instinct-plugin/roleplay-types';import{RPPermissionGuard}from'../../../../components/templates/permission-guard';import{CloseVotingModal}from'./close-voting-modal/CloseVotingModal';export function LawActions(_ref){var _lawStatusToActions;var law=_ref.law,onChange=_ref.onChange;var _useContext=useContext(sessionContext),user=_useContext.user;var isAuthor=law.user.id===user.id;var hasVoted=law.votes.find(function(_){return _.user.id===user.id;});var lawStatusToActions=(_lawStatusToActions={},_defineProperty(_lawStatusToActions,LawStatus.Draft,/*#__PURE__*/React.createElement(\"p\",null,\"Voting for this law has not started yet\")),_defineProperty(_lawStatusToActions,LawStatus.UnderReview,!hasVoted?/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(VoteOnLawModal,{law:law,vote:LawVoteStatus.Approved,onFinish:onChange},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-success mr-4\"},/*#__PURE__*/React.createElement(Icon,{type:\"thumbs-up\"}),\"Approve\")),/*#__PURE__*/React.createElement(VoteOnLawModal,{law:law,vote:LawVoteStatus.Rejected,onFinish:onChange},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-danger mr-4\"},/*#__PURE__*/React.createElement(Icon,{type:\"thumbs-down\"}),\"Reject\"))):/*#__PURE__*/React.createElement(\"p\",null,\"You already voted on this law\")),_defineProperty(_lawStatusToActions,LawStatus.Approved,/*#__PURE__*/React.createElement(\"p\",null,\"Voting for this law has finished\")),_defineProperty(_lawStatusToActions,LawStatus.Rejected,/*#__PURE__*/React.createElement(\"p\",null,\"Voting for this law has finished\")),_lawStatusToActions);return/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\",style:{borderRight:'1px solid white'}},/*#__PURE__*/React.createElement(\"h4\",null,\"Voting\"),lawStatusToActions[law.status]),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Other\"),/*#__PURE__*/React.createElement(RPPermissionGuard,{permission:\"websiteVoteOnLaws\",redirect:false},isAuthor&&law.status===LawStatus.Draft&&/*#__PURE__*/React.createElement(Link,{to:\"/government/laws/edit/\".concat(law.id)},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-info mr-4\"},/*#__PURE__*/React.createElement(Icon,{type:\"edit\"}),\"Edit\"))),/*#__PURE__*/React.createElement(DismissLawModal,{law:law}),/*#__PURE__*/React.createElement(OpenVotingModal,{law:law,onFinish:onChange}),/*#__PURE__*/React.createElement(CloseVotingModal,{law:law,onFinish:onChange})));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/government/laws/law-actions/LawActions.tsx"],"names":["Link","Row","React","useContext","Icon","sessionContext","VoteOnLawModal","OpenVotingModal","DismissLawModal","LawStatus","LawVoteStatus","RPPermissionGuard","CloseVotingModal","LawActions","law","onChange","user","isAuthor","id","hasVoted","votes","find","_","lawStatusToActions","Draft","UnderReview","Approved","Rejected","borderRight","status"],"mappings":"uJAAA,OAAQA,IAAR,KAAmB,QAAnB,CACA,OAAQC,GAAR,KAAkB,YAAlB,CACA,MAAOC,CAAAA,KAAP,EAA0BC,UAA1B,KAA2C,OAA3C,CAEA,OAAQC,IAAR,CAAcC,cAAd,KAAmC,oBAAnC,CACA,OAAQC,cAAR,KAA6B,oCAA7B,CACA,OAAQC,eAAR,KAA8B,qCAA9B,CACA,OAAQC,eAAR,KAA8B,qCAA9B,CACA,OAAQC,SAAR,CAAmBC,aAAnB,KAAuC,iCAAvC,CACA,OAAQC,iBAAR,KAAgC,mDAAhC,CACA,OAAQC,gBAAR,KAA+B,uCAA/B,CAEA,MAAO,SAASC,CAAAA,UAAT,MAAsD,4BAAjCC,CAAAA,GAAiC,MAAjCA,GAAiC,CAA5BC,QAA4B,MAA5BA,QAA4B,CAC3D,gBAAeZ,UAAU,CAACE,cAAD,CAAzB,CAAOW,IAAP,aAAOA,IAAP,CAEA,GAAMC,CAAAA,QAAQ,CAAGH,GAAG,CAACE,IAAJ,CAASE,EAAT,GAAgBF,IAAI,CAAEE,EAAvC,CACA,GAAMC,CAAAA,QAAQ,CAAGL,GAAG,CAACM,KAAJ,CAAUC,IAAV,CAAe,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACN,IAAF,CAAOE,EAAP,GAAcF,IAAI,CAAEE,EAAxB,EAAhB,CAAjB,CAEA,GAAMK,CAAAA,kBAAgD,6DACnDd,SAAS,CAACe,KADyC,cACjC,uEADiC,sCAEnDf,SAAS,CAACgB,WAFyC,CAE3B,CAACN,QAAD,cACvB,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,cAAD,EACE,GAAG,CAAEL,GADP,CAEE,IAAI,CAAEJ,aAAa,CAACgB,QAFtB,CAGE,QAAQ,CAAEX,QAHZ,eAKE,8BAAQ,SAAS,CAAC,8BAAlB,eACE,oBAAC,IAAD,EAAM,IAAI,CAAC,WAAX,EADF,WALF,CADF,cAWE,oBAAC,cAAD,EACE,GAAG,CAAED,GADP,CAEE,IAAI,CAAEJ,aAAa,CAACiB,QAFtB,CAGE,QAAQ,CAAEZ,QAHZ,eAKE,8BAAQ,SAAS,CAAC,6BAAlB,eACE,oBAAC,IAAD,EAAM,IAAI,CAAC,aAAX,EADF,UALF,CAXF,CADuB,cAwBvB,6DA1BkD,sCA4BnDN,SAAS,CAACiB,QA5ByC,cA4B9B,gEA5B8B,sCA6BnDjB,SAAS,CAACkB,QA7ByC,cA6B9B,gEA7B8B,sBAAtD,CAgCA,mBACE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,OAAf,CAAuB,KAAK,CAAE,CAACC,WAAW,CAAE,iBAAd,CAA9B,eACE,uCADF,CAEGL,kBAAkB,CAACT,GAAG,CAACe,MAAL,CAFrB,CADF,cAKE,2BAAK,SAAS,CAAC,OAAf,eACE,sCADF,cAEE,oBAAC,iBAAD,EAAmB,UAAU,CAAC,mBAA9B,CAAkD,QAAQ,CAAE,KAA5D,EACGZ,QAAQ,EAAIH,GAAG,CAACe,MAAJ,GAAepB,SAAS,CAACe,KAArC,eACC,oBAAC,IAAD,EAAM,EAAE,iCAA2BV,GAAG,CAACI,EAA/B,CAAR,eACE,8BAAQ,SAAS,CAAC,2BAAlB,eACE,oBAAC,IAAD,EAAM,IAAI,CAAC,MAAX,EADF,QADF,CAFJ,CAFF,cAYE,oBAAC,eAAD,EAAiB,GAAG,CAAEJ,GAAtB,EAZF,cAaE,oBAAC,eAAD,EAAiB,GAAG,CAAEA,GAAtB,CAA2B,QAAQ,CAAEC,QAArC,EAbF,cAcE,oBAAC,gBAAD,EAAkB,GAAG,CAAED,GAAvB,CAA4B,QAAQ,CAAEC,QAAtC,EAdF,CALF,CADF,CAwBD","sourcesContent":["import {Link} from 'wouter';\nimport {Row} from 'reactstrap';\nimport React, {ReactNode, useContext} from 'react';\nimport {LawActionsProps} from './LawActions.types';\nimport {Icon, sessionContext} from '@instinct-web/core';\nimport {VoteOnLawModal} from './vote-on-law-modal/VoteOnLawModal';\nimport {OpenVotingModal} from './open-voting-modal/OpenVotingModal';\nimport {DismissLawModal} from './dismiss-law-modal/DismissLawModal';\nimport {LawStatus, LawVoteStatus} from '@instinct-plugin/roleplay-types';\nimport {RPPermissionGuard} from '../../../../components/templates/permission-guard';\nimport {CloseVotingModal} from './close-voting-modal/CloseVotingModal';\n\nexport function LawActions({law, onChange}: LawActionsProps) {\n  const {user} = useContext(sessionContext);\n\n  const isAuthor = law.user.id === user!.id;\n  const hasVoted = law.votes.find(_ => _.user.id === user!.id);\n\n  const lawStatusToActions: Record<LawStatus, ReactNode> = {\n    [LawStatus.Draft]: <p>Voting for this law has not started yet</p>,\n    [LawStatus.UnderReview]: !hasVoted ? (\n      <div className=\"d-flex\">\n        <VoteOnLawModal\n          law={law}\n          vote={LawVoteStatus.Approved}\n          onFinish={onChange}\n        >\n          <button className=\"btn btn-outline-success mr-4\">\n            <Icon type=\"thumbs-up\" />\n            Approve\n          </button>\n        </VoteOnLawModal>\n        <VoteOnLawModal\n          law={law}\n          vote={LawVoteStatus.Rejected}\n          onFinish={onChange}\n        >\n          <button className=\"btn btn-outline-danger mr-4\">\n            <Icon type=\"thumbs-down\" />\n            Reject\n          </button>\n        </VoteOnLawModal>\n      </div>\n    ) : (\n      <p>You already voted on this law</p>\n    ),\n    [LawStatus.Approved]: <p>Voting for this law has finished</p>,\n    [LawStatus.Rejected]: <p>Voting for this law has finished</p>,\n  };\n\n  return (\n    <Row>\n      <div className=\"col-6\" style={{borderRight: '1px solid white'}}>\n        <h4>Voting</h4>\n        {lawStatusToActions[law.status]}\n      </div>\n      <div className=\"col-6\">\n        <h4>Other</h4>\n        <RPPermissionGuard permission=\"websiteVoteOnLaws\" redirect={false}>\n          {isAuthor && law.status === LawStatus.Draft && (\n            <Link to={`/government/laws/edit/${law.id}`}>\n              <button className=\"btn btn-outline-info mr-4\">\n                <Icon type=\"edit\" />\n                Edit\n              </button>\n            </Link>\n          )}\n        </RPPermissionGuard>\n        <DismissLawModal law={law} />\n        <OpenVotingModal law={law} onFinish={onChange} />\n        <CloseVotingModal law={law} onFinish={onChange} />\n      </div>\n    </Row>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}