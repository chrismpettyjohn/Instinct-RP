{"ast":null,"code":"var _jsxFileName = \"/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/government/laws/LawDirectory.tsx\";\nimport { Link } from 'wouter';\nimport { uniqBy } from 'lodash';\nimport React, { useState } from 'react';\nimport { Row } from '../../../components/generic/row/Row';\nimport { UserLayout } from '../../../components/layout/user';\nimport { useFetchLaws } from '../../../hooks/law/fetch-laws';\nimport { Container } from '../../../components/generic/container/Container';\nimport { Icon, Input, Select, setURL } from '@instinct-web/core';\nimport { MiniJumbotron } from '../../../components/generic/mini-jumbotron/MiniJumbotron';\nimport { RPPermissionGuard } from '../../../components/templates/permission-guard';\nsetURL('government/laws', /*#__PURE__*/React.createElement(LawDirectory, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 27\n  }\n}));\nexport function LawDirectory() {\n  var _laws$map;\n\n  const laws = useFetchLaws();\n  const [billNameFilter, setBillNameFilter] = useState();\n  const [billSponsorFilter, setBillSponsorFilter] = useState();\n\n  function filterByName(law) {\n    if (!billNameFilter) return true;\n    return law.id.toString().includes(billNameFilter) || law.title.toLowerCase().includes(billNameFilter) || law.description.toLowerCase().includes(billNameFilter);\n  }\n\n  function filterBySponsor(law) {\n    if (!billSponsorFilter) return true;\n    return law.user.id === billSponsorFilter;\n  }\n\n  const uniqueSponsors = uniqBy((_laws$map = laws === null || laws === void 0 ? void 0 : laws.map(_ => _.user)) !== null && _laws$map !== void 0 ? _laws$map : [], 'id').map(_ => ({\n    value: _.id,\n    label: _.username\n  }));\n  const activeFilter = !!filterByName || !!filterBySponsor;\n  const filteredBills = laws === null || laws === void 0 ? void 0 : laws.filter(filterByName).filter(filterBySponsor);\n  return /*#__PURE__*/React.createElement(UserLayout, {\n    section: \"games_ranking\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MiniJumbotron, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 19\n    }\n  }, \"Laws of Bobba\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 19\n    }\n  }, \"The following are bills Submitted to the National Assembly\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(RPPermissionGuard, {\n    permission: \"websiteProposeLaws\",\n    redirect: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/government/laws/create\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    type: \"plus-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 25\n    }\n  }), \"Propose Law\")))))))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MiniJumbotron, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 19\n    }\n  }, \"Search\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 19\n    }\n  }, \"Bill Name\"), /*#__PURE__*/React.createElement(Input, {\n    value: billNameFilter !== null && billNameFilter !== void 0 ? billNameFilter : '',\n    name: \"bill_filter\",\n    placeholder: \"Search by name...\",\n    type: \"text\",\n    onChange: (key, value) => setBillNameFilter(value.toLowerCase()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, \"Bill Sponsor\"), /*#__PURE__*/React.createElement(Select, {\n    options: uniqueSponsors,\n    value: uniqueSponsors.find(_ => _.value === billSponsorFilter),\n    onChange: _ => setBillSponsorFilter(_.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 19\n    }\n  }))))))));\n}","map":null,"metadata":{},"sourceType":"module"}