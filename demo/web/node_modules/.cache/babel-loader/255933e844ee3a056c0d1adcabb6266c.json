{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useContext}from'react';import{Row}from'../../../../components/generic/row/Row';import{Icon}from'../../../../components/generic/icon/Icon';import{Card}from'../../../../components/generic/card/Card';import{Avatar,photoService,sessionContext}from'@instinct-web/core';import Moment from'moment';import{PhotoReaction}from'@instinct-prj/interface';import{toast}from'react-toastify';export function PhotoCard(_ref){var photo=_ref.photo,onChange=_ref.onChange;var _useContext=useContext(sessionContext),user=_useContext.user;var _ref2=[photo.reactions.filter(function(_){return _.reaction===PhotoReaction.Like;}),photo.reactions.filter(function(_){return _.reaction===PhotoReaction.Dislike;})],likeReactions=_ref2[0],dislikeReactions=_ref2[1];var alreadyLiked=!!likeReactions.filter(function(_){return _.user.id===(user===null||user===void 0?void 0:user.id);}),alreadyDisliked=!!dislikeReactions.filter(function(_){return _.user.id===(user===null||user===void 0?void 0:user.id);});function onReact(_x){return _onReact.apply(this,arguments);}function _onReact(){_onReact=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(reaction){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return photoService.reactByID(\"\".concat(photo.id),reaction);case 3:toast.success(\"You \".concat(reaction,\"d \").concat(photo.user.username,\"'s photo\"));onChange();_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);toast.error(\"You failed to \".concat(reaction,\" \").concat(photo.user.username,\"'s photo\"));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _onReact.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mb-4\",key:\"photo_\".concat(photo.id)},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:250,height:250,backgroundImage:\"url(\".concat(photo.imagePath,\")\"),backgroundSize:'cover',display:'flex',position:'relative'}},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100\",style:{alignSelf:'flex-end',opacity:0.6,height:50}},/*#__PURE__*/React.createElement(\"div\",{className:\"bg-dark h-100 float-right\",style:{width:120}})),/*#__PURE__*/React.createElement(\"div\",{style:{position:'absolute',bottom:0,right:0}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2\"},/*#__PURE__*/React.createElement(Icon,{className:\"text-success\",type:\"thumbs-up\",style:{opacity:alreadyLiked?1:0.8,cursor:'pointer'},onClick:function onClick(){return onReact(PhotoReaction.Like);}}),' ',likeReactions.length,/*#__PURE__*/React.createElement(Icon,{className:\"text-danger ml-4\",type:\"thumbs-down\",style:{opacity:alreadyDisliked?1:0.8},onClick:function onClick(){return onReact(PhotoReaction.Dislike);}}),' ',dislikeReactions.length)))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(Avatar,{look:photo.user.figure,headOnly:true}),/*#__PURE__*/React.createElement(\"b\",null,photo.user.username)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-right\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},Moment.unix(photo.createdAt).format('MM/DD/YY'))))));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/community/photos/photo-card/PhotoCard.tsx"],"names":["React","useContext","Row","Icon","Card","Avatar","photoService","sessionContext","Moment","PhotoReaction","toast","PhotoCard","photo","onChange","user","reactions","filter","_","reaction","Like","Dislike","likeReactions","dislikeReactions","alreadyLiked","id","alreadyDisliked","onReact","reactByID","success","username","error","width","height","backgroundImage","imagePath","backgroundSize","display","position","alignSelf","opacity","bottom","right","cursor","length","figure","unix","createdAt","format"],"mappings":"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","sourcesContent":["import React, {useContext} from 'react';\nimport {PhotoCardProps} from './PhotoCard.types';\nimport {Row} from '../../../../components/generic/row/Row';\nimport {Icon} from '../../../../components/generic/icon/Icon';\nimport {Card} from '../../../../components/generic/card/Card';\nimport {Avatar, photoService, sessionContext} from '@instinct-web/core';\nimport Moment from 'moment';\nimport {PhotoReaction} from '@instinct-prj/interface';\nimport {toast} from 'react-toastify';\n\nexport function PhotoCard({photo, onChange}: PhotoCardProps) {\n  const {user} = useContext(sessionContext);\n\n  const [likeReactions, dislikeReactions] = [\n    photo.reactions.filter(_ => _.reaction === PhotoReaction.Like),\n    photo.reactions.filter(_ => _.reaction === PhotoReaction.Dislike),\n  ];\n\n  const [alreadyLiked, alreadyDisliked] = [\n    !!likeReactions.filter(_ => _.user.id === user?.id),\n    !!dislikeReactions.filter(_ => _.user.id === user?.id),\n  ];\n\n  async function onReact(reaction: PhotoReaction) {\n    try {\n      await photoService.reactByID(`${photo.id}`, reaction);\n      toast.success(`You ${reaction}d ${photo.user!.username}'s photo`);\n      onChange();\n    } catch (e) {\n      toast.error(`You failed to ${reaction} ${photo.user!.username}'s photo`);\n    }\n  }\n\n  return (\n    <div className=\"col-4 mb-4\" key={`photo_${photo.id}`}>\n      <Card>\n        <div className=\"col-12\">\n          <div\n            style={{\n              width: 250,\n              height: 250,\n              backgroundImage: `url(${photo.imagePath})`,\n              backgroundSize: 'cover',\n              display: 'flex',\n              position: 'relative',\n            }}\n          >\n            <div\n              className=\"w-100\"\n              style={{\n                alignSelf: 'flex-end',\n                opacity: 0.6,\n                height: 50,\n              }}\n            >\n              <div className=\"bg-dark h-100 float-right\" style={{width: 120}} />\n            </div>\n            <div style={{position: 'absolute', bottom: 0, right: 0}}>\n              <div className=\"p-2\">\n                <Icon\n                  className=\"text-success\"\n                  type=\"thumbs-up\"\n                  style={{opacity: alreadyLiked ? 1 : 0.8, cursor: 'pointer'}}\n                  onClick={() => onReact(PhotoReaction.Like)}\n                />{' '}\n                {likeReactions.length}\n                <Icon\n                  className=\"text-danger ml-4\"\n                  type=\"thumbs-down\"\n                  style={{opacity: alreadyDisliked ? 1 : 0.8}}\n                  onClick={() => onReact(PhotoReaction.Dislike)}\n                />{' '}\n                {dislikeReactions.length}\n              </div>\n            </div>\n          </div>\n        </div>\n        <hr />\n        <Row>\n          <div className=\"col-6\">\n            <Avatar look={photo.user!.figure} headOnly />\n            <b>{photo.user!.username}</b>\n          </div>\n          <div className=\"col-6 text-right\">\n            <div className=\"mt-3\">\n              {Moment.unix(photo.createdAt).format('MM/DD/YY')}\n            </div>\n          </div>\n        </Row>\n      </Card>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}