{"ast":null,"code":"import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./UserStatus.scss';import{useFetchRPStats}from'../../../hooks/session';import React,{useContext,useEffect,useState}from'react';import{Avatar,Icon,sessionContext}from'@instinct-web/core';import{useWebSocketEventListener}from'../../../hooks/web-socket';export function UserStatusWidget(){var rpStats=useFetchRPStats();var _useContext=useContext(sessionContext),user=_useContext.user,online=_useContext.online;var _useState=useState(),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];useWebSocketEventListener('update_progress_bars',onStatusChange);useEffect(function(){if(rpStats){setStatus({health:rpStats.health.current,health_max:rpStats.health.maximum,energy:rpStats.energy.current,energy_max:rpStats.energy.maximum});}},[rpStats]);if(!status||!user||!online){return null;}var healthPercent=status.health/status.health_max*100;var energyPercent=status.energy/status.energy_max*100;function onStatusChange(newStatus){setStatus(newStatus);}return/*#__PURE__*/React.createElement(\"div\",{className:\"user-status-widget\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-avatar\"},/*#__PURE__*/React.createElement(Avatar,{look:user.figure}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-9\",style:{marginTop:5}},/*#__PURE__*/React.createElement(\"div\",{className:\"progress\",style:{background:'#f44336',height:25,width:200,position:'relative'}},/*#__PURE__*/React.createElement(\"div\",{className:\"progress-bar\",role:\"progressbar\",style:{background:'#d50000',width:\"\".concat(healthPercent,\"%\")},\"aria-valuenow\":25,\"aria-valuemin\":0,\"aria-valuemax\":100}),/*#__PURE__*/React.createElement(\"h6\",{style:{position:'absolute',top:0,left:0,width:'100%',height:'100%',textAlign:'center',paddingTop:5}},/*#__PURE__*/React.createElement(Icon,{type:\"heart\"}),status===null||status===void 0?void 0:status.health,\" / \",status===null||status===void 0?void 0:status.health_max)),/*#__PURE__*/React.createElement(\"div\",{className:\"progress\",style:{background:'#01579B',height:15,width:200,position:'relative',borderTopLeftRadius:0,borderTopRightRadius:0,marginTop:-5}},/*#__PURE__*/React.createElement(\"div\",{className:\"progress-bar\",role:\"progressbar\",style:{background:'#0277BD',width:\"\".concat(energyPercent,\"%\")},\"aria-valuenow\":25,\"aria-valuemin\":0,\"aria-valuemax\":100})))));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/widgets/ui/user-status/UserStatus.tsx"],"names":["useFetchRPStats","React","useContext","useEffect","useState","Avatar","Icon","sessionContext","useWebSocketEventListener","UserStatusWidget","rpStats","user","online","status","setStatus","onStatusChange","health","current","health_max","maximum","energy","energy_max","healthPercent","energyPercent","newStatus","figure","marginTop","background","height","width","position","top","left","textAlign","paddingTop","borderTopLeftRadius","borderTopRightRadius"],"mappings":"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","sourcesContent":["import './UserStatus.scss';\nimport {useFetchRPStats} from '../../../hooks/session';\nimport React, {useContext, useEffect, useState} from 'react';\nimport {Avatar, Icon, sessionContext} from '@instinct-web/core';\nimport {useWebSocketEventListener} from '../../../hooks/web-socket';\nimport {WebSocketIncomingUpdateProgressBarsEvent} from '@instinct-plugin/roleplay-types';\n\nexport function UserStatusWidget() {\n  const rpStats = useFetchRPStats();\n  const {user, online} = useContext(sessionContext);\n  const [status, setStatus] =\n    useState<WebSocketIncomingUpdateProgressBarsEvent>();\n  useWebSocketEventListener('update_progress_bars', onStatusChange);\n\n  useEffect(() => {\n    if (rpStats) {\n      setStatus({\n        health: rpStats.health.current,\n        health_max: rpStats.health.maximum,\n        energy: rpStats.energy.current,\n        energy_max: rpStats.energy.maximum,\n      });\n    }\n  }, [rpStats]);\n\n  if (!status || !user || !online) {\n    return null;\n  }\n\n  const healthPercent = (status.health / status.health_max) * 100;\n  const energyPercent = (status.energy / status.energy_max) * 100;\n\n  function onStatusChange(newStatus: WebSocketIncomingUpdateProgressBarsEvent) {\n    setStatus(newStatus);\n  }\n\n  return (\n    <div className=\"user-status-widget\">\n      <div className=\"row\">\n        <div className=\"col-3\">\n          <div className=\"user-avatar\">\n            <Avatar look={user.figure} />\n          </div>\n        </div>\n        <div className=\"col-9\" style={{marginTop: 5}}>\n          <div\n            className=\"progress\"\n            style={{\n              background: '#f44336',\n              height: 25,\n              width: 200,\n              position: 'relative',\n            }}\n          >\n            <div\n              className=\"progress-bar\"\n              role=\"progressbar\"\n              style={{background: '#d50000', width: `${healthPercent}%`}}\n              aria-valuenow={25}\n              aria-valuemin={0}\n              aria-valuemax={100}\n            />\n            <h6\n              style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: '100%',\n                textAlign: 'center',\n                paddingTop: 5,\n              }}\n            >\n              <Icon type=\"heart\" />\n              {status?.health} / {status?.health_max}\n            </h6>\n          </div>\n          <div\n            className=\"progress\"\n            style={{\n              background: '#01579B',\n              height: 15,\n              width: 200,\n              position: 'relative',\n              borderTopLeftRadius: 0,\n              borderTopRightRadius: 0,\n              marginTop: -5,\n            }}\n          >\n            <div\n              className=\"progress-bar\"\n              role=\"progressbar\"\n              style={{background: '#0277BD', width: `${energyPercent}%`}}\n              aria-valuenow={25}\n              aria-valuemin={0}\n              aria-valuemax={100}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}