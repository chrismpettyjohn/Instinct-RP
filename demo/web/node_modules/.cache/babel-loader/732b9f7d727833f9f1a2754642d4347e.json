{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{photoService}from'@instinct-web/core';import React,{useEffect,useState}from'react';import{Row}from'../../../components/generic/row/Row';import{UserLayout}from'../../../components/layout/user';import{Card}from'../../../components/generic/card/Card';import{defaultPhotosState}from'./PhotosInterface';import{Container}from'../../../components/generic/container/Container';import{MiniJumbotron}from'../../../components/generic/mini-jumbotron/MiniJumbotron';import{Loading,setURL}from'@instinct-web/core';import{PhotoCard}from'./photo-card/PhotoCard';setURL('community/photos',/*#__PURE__*/React.createElement(Photos,null));export function Photos(){var _useState=useState(defaultPhotosState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),refresh=_useState4[0],setRefresh=_useState4[1];useEffect(function(){setState(defaultPhotosState);function fetchPhotos(){return _fetchPhotos.apply(this,arguments);}function _fetchPhotos(){_fetchPhotos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var photos;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return photoService.getAll();case 2:photos=_context.sent;setState({photos:photos,showSpinner:false});case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchPhotos.apply(this,arguments);}fetchPhotos();},[refresh]);return/*#__PURE__*/React.createElement(UserLayout,{section:\"community_photos\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(MiniJumbotron,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Photos\"),/*#__PURE__*/React.createElement(\"p\",null,\"Pictures captured by our users around the world\")))),/*#__PURE__*/React.createElement(Loading,{isLoading:state.showSpinner},state.photos.length===0&&/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(\"h3\",null,\"Hmmm...\"),/*#__PURE__*/React.createElement(\"p\",null,\"It looks like there aren't any pictures. Maybe you could be the first!\")))),/*#__PURE__*/React.createElement(Row,null,state.photos.map(function(photo){return/*#__PURE__*/React.createElement(PhotoCard,{key:\"photo_\".concat(photo.id),photo:photo,onChange:function onChange(){return setRefresh(function(_){return _+1;});}});})))));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/community/photos/Photos.tsx"],"names":["photoService","React","useEffect","useState","Row","UserLayout","Card","defaultPhotosState","Container","MiniJumbotron","Loading","setURL","PhotoCard","Photos","state","setState","refresh","setRefresh","fetchPhotos","getAll","photos","showSpinner","length","map","photo","id","_"],"mappings":"4bACA,OAAQA,YAAR,KAA2B,oBAA3B,CACA,MAAOC,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAAQC,GAAR,KAAkB,qCAAlB,CACA,OAAQC,UAAR,KAAyB,iCAAzB,CACA,OAAQC,IAAR,KAAmB,uCAAnB,CACA,OAAQC,kBAAR,KAA8C,mBAA9C,CACA,OAAQC,SAAR,KAAwB,iDAAxB,CACA,OAAQC,aAAR,KAA4B,0DAA5B,CAEA,OAAQC,OAAR,CAAiBC,MAAjB,KAA8B,oBAA9B,CACA,OAAQC,SAAR,KAAwB,wBAAxB,CAEAD,MAAM,CAAC,kBAAD,cAAqB,oBAAC,MAAD,MAArB,CAAN,CAEA,MAAO,SAASE,CAAAA,MAAT,EAAkB,CACvB,cAA0BV,QAAQ,CAAcI,kBAAd,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAA8BZ,QAAQ,CAAC,CAAD,CAAtC,yCAAOa,OAAP,eAAgBC,UAAhB,eAEAf,SAAS,CAAC,UAAM,CACda,QAAQ,CAACR,kBAAD,CAAR,CADc,QAECW,CAAAA,WAFD,2IAEd,oKACgClB,CAAAA,YAAY,CAACmB,MAAb,EADhC,QACQC,MADR,eAEEL,QAAQ,CAAC,CACPK,MAAM,CAANA,MADO,CAEPC,WAAW,CAAE,KAFN,CAAD,CAAR,CAFF,sDAFc,8CASdH,WAAW,GACZ,CAVQ,CAUN,CAACF,OAAD,CAVM,CAAT,CAYA,mBACE,oBAAC,UAAD,EAAY,OAAO,CAAC,kBAApB,eACE,oBAAC,SAAD,mBACE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,aAAD,mBACE,uCADF,cAEE,+EAFF,CADF,CADF,CADF,cASE,oBAAC,OAAD,EAAS,SAAS,CAAEF,KAAK,CAACO,WAA1B,EACGP,KAAK,CAACM,MAAN,CAAaE,MAAb,GAAwB,CAAxB,eACC,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,IAAD,mBACE,wCADF,cAEE,sGAFF,CADF,CADF,CAFJ,cAcE,oBAAC,GAAD,MACGR,KAAK,CAACM,MAAN,CAAaG,GAAb,CAAiB,SAAAC,KAAK,qBACrB,oBAAC,SAAD,EACE,GAAG,iBAAWA,KAAK,CAACC,EAAjB,CADL,CAEE,KAAK,CAAED,KAFT,CAGE,QAAQ,CAAE,0BAAMP,CAAAA,UAAU,CAAC,SAAAS,CAAC,QAAIA,CAAAA,CAAC,CAAG,CAAR,EAAF,CAAhB,EAHZ,EADqB,EAAtB,CADH,CAdF,CATF,CADF,CADF,CAsCD","sourcesContent":["import {Photo} from '@instinct-prj/interface';\nimport {photoService} from '@instinct-web/core';\nimport React, {useEffect, useState} from 'react';\nimport {Row} from '../../../components/generic/row/Row';\nimport {UserLayout} from '../../../components/layout/user';\nimport {Card} from '../../../components/generic/card/Card';\nimport {defaultPhotosState, PhotosState} from './PhotosInterface';\nimport {Container} from '../../../components/generic/container/Container';\nimport {MiniJumbotron} from '../../../components/generic/mini-jumbotron/MiniJumbotron';\n\nimport {Loading, setURL} from '@instinct-web/core';\nimport {PhotoCard} from './photo-card/PhotoCard';\n\nsetURL('community/photos', <Photos />);\n\nexport function Photos() {\n  const [state, setState] = useState<PhotosState>(defaultPhotosState);\n  const [refresh, setRefresh] = useState(0);\n\n  useEffect(() => {\n    setState(defaultPhotosState);\n    async function fetchPhotos(): Promise<void> {\n      const photos: Photo[] = await photoService.getAll();\n      setState({\n        photos,\n        showSpinner: false,\n      });\n    }\n    fetchPhotos();\n  }, [refresh]);\n\n  return (\n    <UserLayout section=\"community_photos\">\n      <Container>\n        <Row>\n          <div className=\"col-12\">\n            <MiniJumbotron>\n              <h1>Photos</h1>\n              <p>Pictures captured by our users around the world</p>\n            </MiniJumbotron>\n          </div>\n        </Row>\n        <Loading isLoading={state.showSpinner}>\n          {state.photos.length === 0 && (\n            <Row>\n              <div className=\"col-12\">\n                <Card>\n                  <h3>Hmmm...</h3>\n                  <p>\n                    It looks like there aren't any pictures. Maybe you could be\n                    the first!\n                  </p>\n                </Card>\n              </div>\n            </Row>\n          )}\n          <Row>\n            {state.photos.map(photo => (\n              <PhotoCard\n                key={`photo_${photo.id}`}\n                photo={photo}\n                onChange={() => setRefresh(_ => _ + 1)}\n              />\n            ))}\n          </Row>\n        </Loading>\n      </Container>\n    </UserLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}