{"ast":null,"code":"var _jsxFileName = \"/Users/chris/Projects/instinct/packages/@instinct-theme/ares/src/pages/auth/register/Register.tsx\";\nimport './Register.scss';\nimport { Link, useLocation } from 'wouter';\nimport ReCAPTCHA from 'react-google-recaptcha';\nimport { GuestLayout } from '../../../components/layout/guest';\nimport React, { useContext, useState } from 'react';\nimport { defaultRegisterState } from './Register.types';\nimport { configContext, sessionContext, sessionService, setURL, userService } from '@instinct-web/core';\nimport { FigureSelector } from './figure-selector/FigureSelector';\nimport { UsernameField } from '../../../components/username-field/UsernameField';\nsetURL('register', /*#__PURE__*/React.createElement(Register, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 20\n  }\n}));\nexport function Register() {\n  var _state$figure;\n\n  const {\n    config\n  } = useContext(configContext);\n  const {\n    setUser\n  } = useContext(sessionContext); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  const [location, setLocation] = useLocation();\n  const [state, setState] = useState(defaultRegisterState);\n  const disabled = state.username === '' || state.password === '' || state.password !== state.passwordAgain || state.captcha === '' || !state.figure || config.siteBeta && state.betaCode === '' || state.showSpinner;\n\n  function onChange(key, value) {\n    setState(_ => ({ ..._,\n      [key]: value\n    }));\n  }\n\n  async function onSubmit(event) {\n    event.preventDefault();\n\n    try {\n      onChange('showSpinner', true);\n      onChange('showError', false);\n      await userService.create(state.username, state.password, state.email, state.captcha, state.betaCode);\n      const bearer = await sessionService.attemptCredentials(state.username, state.password);\n      const user = await sessionService.attemptBearerToken(bearer);\n      await setUser(user);\n      setLocation('/welcome');\n    } catch (e) {\n      onChange('showError', true);\n    } finally {\n      onChange('showSpinner', false);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(GuestLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"main\", {\n    id: \"main\",\n    className: \"no--sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-inline-flex flex-row mb-3 mt-5 w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"Logo\",\n    id: \"logo\",\n    src: config.logoURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-inline-flex flex-column flex-fill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"mb-0 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 15\n    }\n  }, \"Registration\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }, \"Join the fun by registering today!\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    noValidate: true,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xxl-6 col-xl-6 col-md-12 col-sm-12 bg-dark p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(UsernameField, {\n    onChange: newUsername => onChange('username', newUsername),\n    username: state.username,\n    figure: (_state$figure = state.figure) === null || _state$figure === void 0 ? void 0 : _state$figure.look,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-label\",\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 23\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    \"aria-describedby\": \"passwordHelp\",\n    autoComplete: \"current-password\",\n    className: \"form-control p-4\",\n    id: \"password\",\n    required: true,\n    type: \"password\",\n    onChange: e => onChange('password', e.target.value),\n    value: state.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-text\",\n    id: \"passwordHelp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 23\n    }\n  }, \"Type your password in the box above\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-label\",\n    htmlFor: \"confirm-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 23\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    \"aria-describedby\": \"confirmPasswordHelp\",\n    autoComplete: \"current-password\",\n    className: \"form-control p-4\",\n    id: \"confirm-password\",\n    required: true,\n    type: \"password\",\n    onChange: e => onChange('passwordAgain', e.target.value),\n    value: state.passwordAgain,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-text\",\n    id: \"confirmPasswordHelp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 23\n    }\n  }, \"Repeat your password in the box above\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xxl-6 col-xl-6 col-md-12 col-sm-12 bg-dark p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-label\",\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, \"E-Mail\"), /*#__PURE__*/React.createElement(\"input\", {\n    autoComplete: \"email\",\n    className: \"form-control p-4\",\n    id: \"email\",\n    pattern: \"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,3}$\",\n    required: true,\n    type: \"email\",\n    onChange: e => onChange('email', e.target.value),\n    value: state.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ReCAPTCHA, {\n    sitekey: config.googleRecaptchaClientKey,\n    onChange: key => onChange('captcha', key),\n    onExpired: () => onChange('captcha', undefined),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FigureSelector, {\n    figure: state.figure,\n    figures: [{\n      group: 'Boy',\n      look: 'ea-1401-63.lg-275-73.hr-828-45.fa-1212-63.ch-255-64.hd-180-8.sh-290-91'\n    }, {\n      group: 'Boy',\n      look: 'hd-209-1373.lg-3320-110-1408.hr-3163-42.sh-3524-110-92.ch-3077-64-1408'\n    }, {\n      group: 'Boy',\n      look: 'hd-207-1.lg-3058-1428.hr-3162-1906.sh-3089-110.cc-3874-1897-1408'\n    }, {\n      group: 'Boy',\n      look: 'he-1605-1408.lg-285-64.hr-155-42.ch-225-1408.hd-3095-8.sh-300-1408.cc-260-84'\n    }, {\n      group: 'Girl',\n      look: 'hr-3791-45.wa-4060-92-71.lg-3933-92.hd-629-1392.fa-3276-72.ca-3414-92.he-3082-92.ch-3881-110.sh-735-110'\n    }, {\n      group: 'Girl',\n      look: 'lg-720-92.fa-3276-97.ch-50000-77.he-1603-77.hd-629-15.hr-7326-1403-1403.ha-4136-92.ca-3885-92-92.sh-3035-7'\n    }, {\n      group: 'Girl',\n      look: 'hd-600-2.he-1603-71.lg-3078-71.sh-906-92.hr-3852-45.ha-1005-1414.ca-3885-1414-1408.ch-665-92.fa-3276-73'\n    }, {\n      group: 'Girl',\n      look: 'lg-3018-1338.hr-3852-32.he-3329-1412-1330.sh-3016-1409.hd-605-8.ch-3293-92-1412.fa-3276-97'\n    }],\n    onSelect: newFigure => onChange('figure', newFigure),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"selected-look d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `https://avatars.habboon.pw/avatarimage.php?figure=${state.figure ? state.figure.look : 'h-3089-110.hr-3789-61-61.ch-3539-92.lg-3019-110.hd-600-20'}&action=std&gesture=std&direction=2&head_direction=2&size=l&headonly=0`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 23\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-inline-flex justify-content-center w-100 mt-2 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger w-25 p-3\",\n    type: \"submit\",\n    disabled: disabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 21\n    }\n  }, \"Let's Go!\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center mt-4 mt-xl-0 mt-lg-0 pb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    href: \"/\",\n    id: \"register--back\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, \"Already got an account?\", ' ', /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }\n  }, \"Back to Login!\")))))));\n}","map":null,"metadata":{},"sourceType":"module"}