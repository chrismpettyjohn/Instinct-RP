{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useLocation}from'wouter';import{toast}from'react-toastify';import React,{useContext,useState}from'react';import{Icon,sessionContext}from'@instinct-web/core';import{businessService}from'../../../../../services/business';import{Modal,ModalBody,ModalFooter,ModalHeader}from'reactstrap';export function DeleteBusinessModal(_ref){var business=_ref.business;var _useContext=useContext(sessionContext),user=_useContext.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),spinner=_useState2[0],setSpinner=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];var _useLocation=useLocation(),_useLocation2=_slicedToArray(_useLocation,2),location=_useLocation2[0],setLocation=_useLocation2[1];function toggleModal(){setIsOpen(function(_){return!_;});}function onConfirm(){return _onConfirm.apply(this,arguments);}function _onConfirm(){_onConfirm=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setSpinner(true);_context.next=4;return businessService.delete(business.id);case 4:toast.success(\"Your business \".concat(business.name,\" has been deleted\"));setLocation('/businesses');_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);toast.error(\"There was a problem deleting \".concat(businessname));case 11:_context.prev=11;setSpinner(false);return _context.finish(11);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,8,11,14]]);}));return _onConfirm.apply(this,arguments);}if(business.owner.id!==user.id){return null;}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen,toggle:toggleModal},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggleModal},\"Confirmation\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"h3\",null,\"Are You Sure?\"),/*#__PURE__*/React.createElement(\"p\",null,\"You are about to delete \",/*#__PURE__*/React.createElement(\"b\",null,business.name)),/*#__PURE__*/React.createElement(\"p\",null,\"Upon confirmation, your business will be permanently deleted and all of your employees will become unemployed.\"),/*#__PURE__*/React.createElement(\"p\",null,\"Please consider reaching out to the Department of Labor, Commerce & Agriculture for a business loan if finances are a concern.\")),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(\"span\",{onClick:toggleModal},\"Cancel\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-danger ml-2\",disabled:spinner,onClick:onConfirm},spinner?/*#__PURE__*/React.createElement(Icon,{className:\"fa-spin\",type:\"spinner\"}):'Confirm Deletion'))),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-block btn-outline-danger\",disabled:spinner,onClick:toggleModal},/*#__PURE__*/React.createElement(Icon,{type:\"trash\"}),\"Delete\"));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/business/widgets/business-tools/delete-business-modal/DeleteBusinessModal.tsx"],"names":["useLocation","toast","React","useContext","useState","Icon","sessionContext","businessService","Modal","ModalBody","ModalFooter","ModalHeader","DeleteBusinessModal","business","user","spinner","setSpinner","isOpen","setIsOpen","location","setLocation","toggleModal","_","onConfirm","delete","id","success","name","error","businessname","owner"],"mappings":"4bAAA,OAAQA,WAAR,KAA0B,QAA1B,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,MAAOC,CAAAA,KAAP,EAAeC,UAAf,CAA2BC,QAA3B,KAA0C,OAA1C,CACA,OAAQC,IAAR,CAAcC,cAAd,KAAmC,oBAAnC,CAEA,OAAQC,eAAR,KAA8B,kCAA9B,CACA,OAAQC,KAAR,CAAeC,SAAf,CAA0BC,WAA1B,CAAuCC,WAAvC,KAAyD,YAAzD,CAEA,MAAO,SAASC,CAAAA,mBAAT,MAA6D,IAA/BC,CAAAA,QAA+B,MAA/BA,QAA+B,CAClE,gBAAeV,UAAU,CAACG,cAAD,CAAzB,CAAOQ,IAAP,aAAOA,IAAP,CACA,cAA8BV,QAAQ,CAAC,KAAD,CAAtC,wCAAOW,OAAP,eAAgBC,UAAhB,eACA,eAA4BZ,QAAQ,CAAC,KAAD,CAApC,yCAAOa,MAAP,eAAeC,SAAf,eACA,iBAAgClB,WAAW,EAA3C,8CAAOmB,QAAP,kBAAiBC,WAAjB,kBAEA,QAASC,CAAAA,WAAT,EAA6B,CAC3BH,SAAS,CAAC,SAAAI,CAAC,QAAI,CAACA,CAAL,EAAF,CAAT,CACD,CARiE,QAUnDC,CAAAA,SAVmD,qIAUlE,mJAEIP,UAAU,CAAC,IAAD,CAAV,CAFJ,sBAGUT,CAAAA,eAAe,CAACiB,MAAhB,CAAuBX,QAAQ,CAACY,EAAhC,CAHV,QAIIxB,KAAK,CAACyB,OAAN,yBAA+Bb,QAAQ,CAACc,IAAxC,uBACAP,WAAW,CAAC,aAAD,CAAX,CALJ,+EAOInB,KAAK,CAAC2B,KAAN,wCAA4CC,YAA5C,GAPJ,yBASIb,UAAU,CAAC,KAAD,CAAV,CATJ,qGAVkE,4CAuBlE,GAAIH,QAAQ,CAACiB,KAAT,CAAeL,EAAf,GAAsBX,IAAI,CAAEW,EAAhC,CAAoC,CAClC,MAAO,KAAP,CACD,CAED,mBACE,qDACE,oBAAC,KAAD,EAAO,MAAM,CAAER,MAAf,CAAuB,MAAM,CAAEI,WAA/B,eACE,oBAAC,WAAD,EAAa,MAAM,CAAEA,WAArB,iBADF,cAEE,oBAAC,SAAD,mBACE,8CADF,cAEE,qEAC0B,6BAAIR,QAAQ,CAACc,IAAb,CAD1B,CAFF,cAKE,8IALF,cASE,8JATF,CAFF,cAgBE,oBAAC,WAAD,mBACE,4BAAM,OAAO,CAAEN,WAAf,WADF,cAEE,8BACE,SAAS,CAAC,6BADZ,CAEE,QAAQ,CAAEN,OAFZ,CAGE,OAAO,CAAEQ,SAHX,EAKGR,OAAO,cACN,oBAAC,IAAD,EAAM,SAAS,CAAC,SAAhB,CAA0B,IAAI,CAAC,SAA/B,EADM,CAGN,kBARJ,CAFF,CAhBF,CADF,cAgCE,8BACE,SAAS,CAAC,kCADZ,CAEE,QAAQ,CAAEA,OAFZ,CAGE,OAAO,CAAEM,WAHX,eAKE,oBAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EALF,UAhCF,CADF,CA2CD","sourcesContent":["import {useLocation} from 'wouter';\nimport {toast} from 'react-toastify';\nimport React, {useContext, useState} from 'react';\nimport {Icon, sessionContext} from '@instinct-web/core';\nimport {BusinessToolsProps} from '../BusinessTools.types';\nimport {businessService} from '../../../../../services/business';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\n\nexport function DeleteBusinessModal({business}: BusinessToolsProps) {\n  const {user} = useContext(sessionContext);\n  const [spinner, setSpinner] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  const [location, setLocation] = useLocation();\n\n  function toggleModal(): void {\n    setIsOpen(_ => !_);\n  }\n\n  async function onConfirm(): Promise<void> {\n    try {\n      setSpinner(true);\n      await businessService.delete(business.id);\n      toast.success(`Your business ${business.name} has been deleted`);\n      setLocation('/businesses');\n    } catch {\n      toast.error(`There was a problem deleting ${businessname}`);\n    } finally {\n      setSpinner(false);\n    }\n  }\n\n  if (business.owner.id !== user!.id) {\n    return null;\n  }\n\n  return (\n    <>\n      <Modal isOpen={isOpen} toggle={toggleModal}>\n        <ModalHeader toggle={toggleModal}>Confirmation</ModalHeader>\n        <ModalBody>\n          <h3>Are You Sure?</h3>\n          <p>\n            You are about to delete <b>{business.name}</b>\n          </p>\n          <p>\n            Upon confirmation, your business will be permanently deleted and all\n            of your employees will become unemployed.\n          </p>\n          <p>\n            Please consider reaching out to the Department of Labor, Commerce &\n            Agriculture for a business loan if finances are a concern.\n          </p>\n        </ModalBody>\n        <ModalFooter>\n          <span onClick={toggleModal}>Cancel</span>\n          <button\n            className=\"btn btn-outline-danger ml-2\"\n            disabled={spinner}\n            onClick={onConfirm}\n          >\n            {spinner ? (\n              <Icon className=\"fa-spin\" type=\"spinner\" />\n            ) : (\n              'Confirm Deletion'\n            )}\n          </button>\n        </ModalFooter>\n      </Modal>\n      <button\n        className=\"btn btn-block btn-outline-danger\"\n        disabled={spinner}\n        onClick={toggleModal}\n      >\n        <Icon type=\"trash\" />\n        Delete\n      </button>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}