{"ast":null,"code":"import _toConsumableArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{businessEditorContext}from'./BusinessEditor';import{exampleBusinessDTO}from'@instinct-plugin/roleplay-types';export function BusinessEditorProvider(_ref){var children=_ref.children,defaultBusiness=_ref.defaultBusiness;var _useState=useState(defaultBusiness!==null&&defaultBusiness!==void 0?defaultBusiness:exampleBusinessDTO),_useState2=_slicedToArray(_useState,2),business=_useState2[0],setBusinessState=_useState2[1];function setBusiness(key,value){setBusinessState(function(_){return _objectSpread(_objectSpread({},_),{},_defineProperty({},key,value));});}function addPosition(position){setBusinessState(function(_){return _objectSpread(_objectSpread({},_),{},{positions:[].concat(_toConsumableArray(_.positions),[position])});});}function delPosition(index){setBusinessState(function(_){return _objectSpread(_objectSpread({},_),{},{positions:_.positions.filter(function(pos,i){return i!==index;})});});}function editPosition(index,key,value){setBusinessState(function(_){var newPositions=_toConsumableArray(_.positions);newPositions[index][key]=value;return _objectSpread(_objectSpread({},_),{},{positions:newPositions});});}return/*#__PURE__*/React.createElement(businessEditorContext.Provider,{value:{business:business,setBusiness:setBusiness,addPosition:addPosition,delPosition:delPosition,editPosition:editPosition}},children);}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/business/editor/context/BusinessEditorProvider.tsx"],"names":["React","useState","businessEditorContext","exampleBusinessDTO","BusinessEditorProvider","children","defaultBusiness","business","setBusinessState","setBusiness","key","value","_","addPosition","position","positions","delPosition","index","filter","pos","i","editPosition","newPositions"],"mappings":"6lBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAAQC,qBAAR,KAAoC,kBAApC,CACA,OAIEC,kBAJF,KAKO,iCALP,CAQA,MAAO,SAASC,CAAAA,sBAAT,MAGgC,IAFrCC,CAAAA,QAEqC,MAFrCA,QAEqC,CADrCC,eACqC,MADrCA,eACqC,CACrC,cAAqCL,QAAQ,CAC3CK,eAD2C,SAC3CA,eAD2C,UAC3CA,eAD2C,CACxBH,kBADwB,CAA7C,wCAAOI,QAAP,eAAiBC,gBAAjB,eAIA,QAASC,CAAAA,WAAT,CACEC,GADF,CAEEC,KAFF,CAGE,CACAH,gBAAgB,CAAC,SAAAI,CAAC,wCACbA,CADa,wBAEfF,GAFe,CAETC,KAFS,IAAF,CAAhB,CAID,CAED,QAASE,CAAAA,WAAT,CAAqBC,QAArB,CAAoD,CAClDN,gBAAgB,CAAC,SAAAI,CAAC,wCACbA,CADa,MAEhBG,SAAS,8BAAMH,CAAC,CAACG,SAAR,GAAmBD,QAAnB,EAFO,IAAF,CAAhB,CAID,CAED,QAASE,CAAAA,WAAT,CAAqBC,KAArB,CAAoC,CAClCT,gBAAgB,CAAC,SAAAI,CAAC,wCACbA,CADa,MAEhBG,SAAS,CAAEH,CAAC,CAACG,SAAF,CAAYG,MAAZ,CAAmB,SAACC,GAAD,CAAMC,CAAN,QAAYA,CAAAA,CAAC,GAAKH,KAAlB,EAAnB,CAFK,IAAF,CAAhB,CAID,CAED,QAASI,CAAAA,YAAT,CACEJ,KADF,CAEEP,GAFF,CAGEC,KAHF,CAIE,CACAH,gBAAgB,CAAC,SAAAI,CAAC,CAAI,CACpB,GAAMU,CAAAA,YAAY,oBAAOV,CAAC,CAACG,SAAT,CAAlB,CACAO,YAAY,CAACL,KAAD,CAAZ,CAAoBP,GAApB,EAA2BC,KAA3B,CACA,sCACKC,CADL,MAEEG,SAAS,CAAEO,YAFb,GAID,CAPe,CAAhB,CAQD,CAED,mBACE,oBAAC,qBAAD,CAAuB,QAAvB,EACE,KAAK,CAAE,CAACf,QAAQ,CAARA,QAAD,CAAWE,WAAW,CAAXA,WAAX,CAAwBI,WAAW,CAAXA,WAAxB,CAAqCG,WAAW,CAAXA,WAArC,CAAkDK,YAAY,CAAZA,YAAlD,CADT,EAGGhB,QAHH,CADF,CAOD","sourcesContent":["import React, {useState} from 'react';\nimport {businessEditorContext} from './BusinessEditor';\nimport {\n  Business,\n  BusinessDTO,\n  BusinessPositionDTO,\n  exampleBusinessDTO,\n} from '@instinct-plugin/roleplay-types';\nimport {BusinessEditorContextProviderProps} from './BusinessEditor.types';\n\nexport function BusinessEditorProvider({\n  children,\n  defaultBusiness,\n}: BusinessEditorContextProviderProps) {\n  const [business, setBusinessState] = useState(\n    defaultBusiness ?? exampleBusinessDTO\n  );\n\n  function setBusiness<K extends keyof Omit<BusinessDTO, 'permissions'>>(\n    key: K,\n    value: Omit<BusinessDTO, 'permissions'>[K]\n  ) {\n    setBusinessState(_ => ({\n      ..._,\n      [key]: value,\n    }));\n  }\n\n  function addPosition(position: BusinessPositionDTO) {\n    setBusinessState(_ => ({\n      ..._,\n      positions: [..._.positions, position],\n    }));\n  }\n\n  function delPosition(index: number) {\n    setBusinessState(_ => ({\n      ..._,\n      positions: _.positions.filter((pos, i) => i !== index),\n    }));\n  }\n\n  function editPosition<K extends keyof BusinessPositionDTO>(\n    index: number,\n    key: K,\n    value: BusinessPositionDTO[K]\n  ) {\n    setBusinessState(_ => {\n      const newPositions = [..._.positions];\n      newPositions[index][key] = value;\n      return {\n        ..._,\n        positions: newPositions,\n      };\n    });\n  }\n\n  return (\n    <businessEditorContext.Provider\n      value={{business, setBusiness, addPosition, delPosition, editPosition}}\n    >\n      {children}\n    </businessEditorContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}