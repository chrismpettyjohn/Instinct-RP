{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{articleService,Icon,PermissionGuard}from'@instinct-web/core';export function DeleteComment(_ref){var comment=_ref.comment,onDelete=_ref.onDelete;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];function onSubmit(){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!isLoading){_context.next=3;break;}return _context.abrupt(\"return\");case 3:setLoading(true);_context.next=6;return articleService.deleteComment(comment.articleID,comment.id);case 6:onDelete();case 7:_context.prev=7;setLoading(false);return _context.finish(7);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,,7,10]]);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(PermissionGuard,{permission:\"websiteManageComments\",redirect:false},/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger\",onClick:onSubmit,style:{cursor:'pointer'}},/*#__PURE__*/React.createElement(Icon,{type:!isLoading?'trash':'spinner fa-spin'})));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/community/news/view-article/view-comments/delete-comment/DeleteComment.tsx"],"names":["React","useState","articleService","Icon","PermissionGuard","DeleteComment","comment","onDelete","isLoading","setLoading","onSubmit","deleteComment","articleID","id","cursor"],"mappings":"4bAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CAEA,OAAQC,cAAR,CAAwBC,IAAxB,CAA8BC,eAA9B,KAAoD,oBAApD,CAEA,MAAO,SAASC,CAAAA,aAAT,MAAgE,IAAxCC,CAAAA,OAAwC,MAAxCA,OAAwC,CAA/BC,QAA+B,MAA/BA,QAA+B,CACrE,cAAgCN,QAAQ,CAAC,KAAD,CAAxC,wCAAOO,SAAP,eAAkBC,UAAlB,eADqE,QAGtDC,CAAAA,QAHsD,kIAGrE,uJAEQF,SAFR,iEAGIC,UAAU,CAAC,IAAD,CAAV,CAHJ,sBAIUP,CAAAA,cAAc,CAACS,aAAf,CAA6BL,OAAO,CAACM,SAArC,CAAgDN,OAAO,CAACO,EAAxD,CAJV,QAKIN,QAAQ,GALZ,uBAOIE,UAAU,CAAC,KAAD,CAAV,CAPJ,kGAHqE,2CAcrE,mBACE,oBAAC,eAAD,EAAiB,UAAU,CAAC,uBAA5B,CAAoD,QAAQ,CAAE,KAA9D,eACE,2BACE,SAAS,CAAC,aADZ,CAEE,OAAO,CAAEC,QAFX,CAGE,KAAK,CAAE,CAACI,MAAM,CAAE,SAAT,CAHT,eAKE,oBAAC,IAAD,EAAM,IAAI,CAAE,CAACN,SAAD,CAAa,OAAb,CAAuB,iBAAnC,EALF,CADF,CADF,CAWD","sourcesContent":["import React, {useState} from 'react';\nimport {DeleteCommentProps} from './DeleteComment.types';\nimport {articleService, Icon, PermissionGuard} from '@instinct-web/core';\n\nexport function DeleteComment({comment, onDelete}: DeleteCommentProps) {\n  const [isLoading, setLoading] = useState(false);\n\n  async function onSubmit() {\n    try {\n      if (isLoading) return;\n      setLoading(true);\n      await articleService.deleteComment(comment.articleID, comment.id);\n      onDelete();\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <PermissionGuard permission=\"websiteManageComments\" redirect={false}>\n      <div\n        className=\"text-danger\"\n        onClick={onSubmit}\n        style={{cursor: 'pointer'}}\n      >\n        <Icon type={!isLoading ? 'trash' : 'spinner fa-spin'} />\n      </div>\n    </PermissionGuard>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}