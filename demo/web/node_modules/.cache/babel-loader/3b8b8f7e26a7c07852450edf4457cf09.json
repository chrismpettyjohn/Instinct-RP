{"ast":null,"code":"var _jsxFileName = \"/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/guides/GuideEdit.tsx\";\nimport React, { useContext, useState } from 'react';\nimport { Link, useRoute } from 'wouter';\nimport { Avatar, Icon, sessionContext, setURL } from '@instinct-web/core';\nimport { Row } from '../../components/generic/row/Row';\nimport { Card } from '../../components/generic/card/Card';\nimport { UserLayout } from '../../components/layout/user';\nimport { Container } from '../../components/generic/container/Container';\nimport { MiniJumbotron } from '../../components/generic/mini-jumbotron/MiniJumbotron';\nimport Moment from 'moment';\nimport { GuideReaction } from '@instinct-plugin/roleplay-types';\nimport { useFetchGuideByID } from '../../hooks/guide/fetch-guide-by-id';\nimport { GuideEditor } from './guide-editor/GuideEditor';\nimport { guideService } from '../../services/guide';\nimport { toast } from 'react-toastify';\nsetURL('guides/edit/:guideID', /*#__PURE__*/React.createElement(GuideEdit, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 32\n  }\n}));\nexport function GuideEdit() {\n  var _guide$name, _guide$content, _guide$category$id, _guide$category, _guide$name2, _guide$category$name, _guide$category2, _guide$user, _guide$user$username, _guide$user2, _guide$user$rank$name, _guide$user3, _guide$user3$rank, _guide$reactions$filt, _guide$reactions, _guide$reactions$filt2, _guide$reactions$filt3, _guide$reactions2, _guide$reactions2$fil;\n\n  const {\n    user\n  } = useContext(sessionContext);\n  const [refresh, setRefresh] = useState(0);\n  const [matched, params] = useRoute('/guides/edit/:guideID');\n  const guide = useFetchGuideByID(params.guideID, refresh);\n\n  if (guide && guide.user.id !== (user === null || user === void 0 ? void 0 : user.id)) {\n    return /*#__PURE__*/React.createElement(Link, {\n      to: `/guides/view/${guide === null || guide === void 0 ? void 0 : guide.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 12\n      }\n    });\n  }\n\n  const baseGuideDTO = {\n    name: (_guide$name = guide.name) !== null && _guide$name !== void 0 ? _guide$name : '',\n    content: (_guide$content = guide === null || guide === void 0 ? void 0 : guide.content) !== null && _guide$content !== void 0 ? _guide$content : '',\n    categoryID: (_guide$category$id = guide === null || guide === void 0 ? void 0 : (_guide$category = guide.category) === null || _guide$category === void 0 ? void 0 : _guide$category.id) !== null && _guide$category$id !== void 0 ? _guide$category$id : 0\n  };\n\n  async function onSubmit(guideDTO) {\n    try {\n      await guideService.updateByID(guide.id, guideDTO);\n      toast.success(`Guide ${guideDTO.name} has been updated`);\n      setRefresh(_ => _ + 1);\n    } catch {\n      toast.error(`Guide ${guide.name} could not be updated at this time`);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(UserLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8 d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/guides\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    className: \"fa-4x text-white\",\n    style: {\n      cursor: 'pointer'\n    },\n    type: \"caret-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-white ml-4\",\n    style: {\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, \"Editing Guide: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 30\n    }\n  }, (_guide$name2 = guide === null || guide === void 0 ? void 0 : guide.name) !== null && _guide$name2 !== void 0 ? _guide$name2 : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 49\n    }\n  }))))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  }, \"Category:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 19\n    }\n  }, (_guide$category$name = guide === null || guide === void 0 ? void 0 : (_guide$category2 = guide.category) === null || _guide$category2 === void 0 ? void 0 : _guide$category2.name) !== null && _guide$category$name !== void 0 ? _guide$category$name : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 48\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }, \"Created At:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 19\n    }\n  }, guide ? Moment.unix(guide.createdAt).format('MM/DD/YYYY') : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 83\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 19\n    }\n  }, \"Last Updated:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }\n  }, guide ? Moment.unix(guide.updatedAt).format('MM/DD/YYYY') : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 83\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, \"Author\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/profile/${guide === null || guide === void 0 ? void 0 : (_guide$user = guide.user) === null || _guide$user === void 0 ? void 0 : _guide$user.username}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"member-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"member-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"member-avatar flex-container flex-vertical-center flex-horizontal-center\",\n    style: {\n      overflow: 'hidden'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 27\n    }\n  }, guide ? /*#__PURE__*/React.createElement(Avatar, {\n    look: guide.user.figure,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 38\n    }\n  }) : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 77\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-2 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 23\n    }\n  }, (_guide$user$username = guide === null || guide === void 0 ? void 0 : (_guide$user2 = guide.user) === null || _guide$user2 === void 0 ? void 0 : _guide$user2.username) !== null && _guide$user$username !== void 0 ? _guide$user$username : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 53\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 23\n    }\n  }, (_guide$user$rank$name = guide === null || guide === void 0 ? void 0 : (_guide$user3 = guide.user) === null || _guide$user3 === void 0 ? void 0 : (_guide$user3$rank = _guide$user3.rank) === null || _guide$user3$rank === void 0 ? void 0 : _guide$user3$rank.name) !== null && _guide$user$rank$name !== void 0 ? _guide$user$rank$name : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 54\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }, \"Upvotes\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    type: \"thumbs-up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }), ' ', (_guide$reactions$filt = guide === null || guide === void 0 ? void 0 : (_guide$reactions = guide.reactions) === null || _guide$reactions === void 0 ? void 0 : (_guide$reactions$filt2 = _guide$reactions.filter(_ => _.reaction === GuideReaction.Like)) === null || _guide$reactions$filt2 === void 0 ? void 0 : _guide$reactions$filt2.length) !== null && _guide$reactions$filt !== void 0 ? _guide$reactions$filt : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 36\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 19\n    }\n  }, \"Downvotes\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    type: \"thumbs-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }), ' ', (_guide$reactions$filt3 = guide === null || guide === void 0 ? void 0 : (_guide$reactions2 = guide.reactions) === null || _guide$reactions2 === void 0 ? void 0 : (_guide$reactions2$fil = _guide$reactions2.filter(_ => _.reaction === GuideReaction.Dislike)) === null || _guide$reactions2$fil === void 0 ? void 0 : _guide$reactions2$fil.length) !== null && _guide$reactions$filt3 !== void 0 ? _guide$reactions$filt3 : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 36\n    }\n  }))))))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MiniJumbotron, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, guide ? /*#__PURE__*/React.createElement(GuideEditor, {\n    baseGuideDTO: baseGuideDTO,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 24\n    }\n  }) : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 90\n    }\n  }))))));\n}","map":null,"metadata":{},"sourceType":"module"}