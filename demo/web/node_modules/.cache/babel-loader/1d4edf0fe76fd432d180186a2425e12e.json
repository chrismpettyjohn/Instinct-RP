{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"prefixCls\", \"className\", \"source\", \"style\", \"onScroll\", \"onMouseOver\", \"warpperElement\"];\nimport React, { useImperativeHandle } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport slug from 'rehype-slug';\nimport headings from 'rehype-autolink-headings';\nimport rehypeRaw from 'rehype-raw';\nimport rehypePrism from '@mapbox/rehype-prism';\nimport rehypeRewrite from 'rehype-rewrite';\nimport \"./styles/markdown.css\";\nimport \"./styles/markdowncolor.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar rehypeRewriteHandle = function rehypeRewriteHandle(node, index, parent) {\n  if (node.type === 'element' && parent.type === 'root' && /h(1|2|3|4|5|6)/.test(node.tagName) && index !== 0) {\n    var child = node.children && node.children[0] ? node.children[0] : null;\n\n    if (child && child.properties && child.properties.ariaHidden === 'true') {\n      child.properties = _extends({\n        class: 'anchor'\n      }, child.properties);\n      child.children = [{\n        type: 'element',\n        tagName: 'svg',\n        properties: {\n          class: 'octicon octicon-link',\n          viewBox: '0 0 16 16',\n          version: '1.1',\n          width: '16',\n          height: '16',\n          ariaHidden: 'true'\n        },\n        children: [{\n          type: 'element',\n          tagName: 'path',\n          properties: {\n            fillRule: 'evenodd',\n            d: 'M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'\n          }\n        }]\n      }];\n    }\n  }\n};\n\nexport default /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _ref = props || {},\n      _ref$prefixCls = _ref.prefixCls,\n      prefixCls = _ref$prefixCls === void 0 ? 'wmde-markdown wmde-markdown-color' : _ref$prefixCls,\n      className = _ref.className,\n      source = _ref.source,\n      style = _ref.style,\n      onScroll = _ref.onScroll,\n      onMouseOver = _ref.onMouseOver,\n      _ref$warpperElement = _ref.warpperElement,\n      warpperElement = _ref$warpperElement === void 0 ? {} : _ref$warpperElement,\n      other = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var mdp = /*#__PURE__*/React.createRef();\n  useImperativeHandle(ref, function () {\n    return _extends({}, props, {\n      mdp: mdp\n    });\n  }, [mdp, props]);\n  var cls = (prefixCls || '') + \" \" + (className || '');\n  return /*#__PURE__*/_jsx(\"div\", _extends({\n    ref: mdp,\n    onScroll: onScroll,\n    onMouseOver: onMouseOver\n  }, warpperElement, {\n    className: cls,\n    style: style,\n    children: /*#__PURE__*/_jsx(ReactMarkdown, _extends({}, other, {\n      rehypePlugins: [[rehypePrism, {\n        ignoreMissing: true\n      }], slug, headings, [rehypeRewrite, rehypeRewriteHandle], rehypeRaw].concat(other.rehypePlugins || []),\n      remarkPlugins: [].concat(other.remarkPlugins || [], [gfm]),\n      children: source || ''\n    }))\n  }));\n});","map":{"version":3,"sources":["../src/index.tsx"],"names":["rehypeRewriteHandle","node","parent","index","child","class","type","tagName","properties","viewBox","version","width","height","ariaHidden","children","fillRule","d","prefixCls","className","source","style","onScroll","onMouseOver","warpperElement","other","props","mdp","React","useImperativeHandle","cls","ignoreMissing"],"mappings":"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","sourcesContent":["import React, { useImperativeHandle } from 'react';\nimport ReactMarkdown, { Options } from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport slug from 'rehype-slug';\nimport headings from 'rehype-autolink-headings'\nimport rehypeRaw from 'rehype-raw';\nimport rehypePrism from '@mapbox/rehype-prism';\nimport rehypeRewrite from 'rehype-rewrite';\nimport './styles/markdown.less';\nimport './styles/markdowncolor.less';\n\nconst rehypeRewriteHandle = (node: any, index: number, parent: any) => {\n  if (node.type === 'element' && parent.type === 'root' && /h(1|2|3|4|5|6)/.test(node.tagName) && index !== 0) {\n    const child = node.children && node.children[0] ? node.children[0] : null;\n    if (child && child.properties && child.properties.ariaHidden === 'true') {\n      child.properties = { class: 'anchor', ...child.properties };\n      child.children = [\n        {\n          type: 'element',\n          tagName: 'svg',\n          properties: {\n            class: 'octicon octicon-link',\n            viewBox: '0 0 16 16',\n            version: '1.1',\n            width: '16',\n            height: '16',\n            ariaHidden: 'true',\n          },\n          children: [\n            {\n              type: 'element',\n              tagName: 'path',\n              properties: {\n                fillRule: 'evenodd',\n                d: 'M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z',\n              }\n            }\n          ]\n        }\n      ];\n    }\n  }\n}\n\nexport type MarkdownPreviewProps = {\n  prefixCls?: string;\n  className?: string;\n  source?: string;\n  style?: React.CSSProperties;\n  warpperElement?: React.DetailedHTMLProps<React.HTMLAttributes<HTMLDivElement>, HTMLDivElement>;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  onMouseOver?: (e: React.MouseEvent<HTMLDivElement>) => void;\n} & Omit<Options, 'children'>;\n\nexport type MarkdownPreviewRef = {\n  mdp: React.RefObject<HTMLDivElement>;\n} & MarkdownPreviewProps;\n\nexport default React.forwardRef<MarkdownPreviewRef, MarkdownPreviewProps>((props, ref) => {\n  const { prefixCls = 'wmde-markdown wmde-markdown-color', className, source, style, onScroll, onMouseOver, warpperElement = {}, ...other  } = props || {};\n  const mdp = React.createRef<HTMLDivElement>();\n  useImperativeHandle(ref, () => ({ ...props, mdp }), [mdp, props]);\n  const cls = `${prefixCls || ''} ${className || ''}`;\n  return (\n    <div ref={mdp} onScroll={onScroll} onMouseOver={onMouseOver} {...warpperElement} className={cls} style={style}>\n      <ReactMarkdown\n        {...other}\n        rehypePlugins={[[rehypePrism, { ignoreMissing: true }], slug, headings, [rehypeRewrite as any, rehypeRewriteHandle], rehypeRaw, ...(other.rehypePlugins || [])]}\n        remarkPlugins={[ ...(other.remarkPlugins || []), gfm ]}\n        children={source || ''}\n      />\n    </div>\n  );\n});\n"]},"metadata":{},"sourceType":"module"}