{"ast":null,"code":"// @ts-ignore - Dependency doesn't have a good @types\nimport Flash from'swfobject';import React,{useContext,useEffect}from'react';import{ClientWidgets}from'../../../widgets/ClientWidgets';import{webSocketContext}from'../../../context/web-socket';import{WebSocketError}from'../../../components/templates/error/WebSocketError';import{configContext,sessionContext,setURL,themeContext}from'@instinct-web/core';setURL('play',/*#__PURE__*/React.createElement(PlayPage,null));export function PlayPage(){var _useContext=useContext(configContext),config=_useContext.config;var _useContext2=useContext(sessionContext),online=_useContext2.online;var _useContext3=useContext(themeContext),setStore=_useContext3.setStore;var _useContext4=useContext(webSocketContext),getConnectionStatus=_useContext4.getConnectionStatus;var flashEnabled=Flash.getFlashPlayerVersion().major>0;var webStatusOK=!config.websocketEnabled||getConnectionStatus();useEffect(function(){setStore({showClient:true});},[]);// eslint-disable-line react-hooks/exhaustive-deps\nif(!webStatusOK&&flashEnabled&&online){return/*#__PURE__*/React.createElement(WebSocketError,null);}return/*#__PURE__*/React.createElement(ClientWidgets,null);}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/home/play/Play.tsx"],"names":["Flash","React","useContext","useEffect","ClientWidgets","webSocketContext","WebSocketError","configContext","sessionContext","setURL","themeContext","PlayPage","config","online","setStore","getConnectionStatus","flashEnabled","getFlashPlayerVersion","major","webStatusOK","websocketEnabled","showClient"],"mappings":"AAAA;AACA,MAAOA,CAAAA,KAAP,KAAkB,WAAlB,CACA,MAAOC,CAAAA,KAAP,EAAeC,UAAf,CAA2BC,SAA3B,KAA2C,OAA3C,CACA,OAAQC,aAAR,KAA4B,gCAA5B,CACA,OAAQC,gBAAR,KAA+B,6BAA/B,CACA,OAAQC,cAAR,KAA6B,oDAA7B,CACA,OACEC,aADF,CAEEC,cAFF,CAGEC,MAHF,CAIEC,YAJF,KAKO,oBALP,CAOAD,MAAM,CAAC,MAAD,cAAS,oBAAC,QAAD,MAAT,CAAN,CAEA,MAAO,SAASE,CAAAA,QAAT,EAAoB,CACzB,gBAAiBT,UAAU,CAACK,aAAD,CAA3B,CAAOK,MAAP,aAAOA,MAAP,CACA,iBAAiBV,UAAU,CAACM,cAAD,CAA3B,CAAOK,MAAP,cAAOA,MAAP,CACA,iBAAmBX,UAAU,CAACQ,YAAD,CAA7B,CAAOI,QAAP,cAAOA,QAAP,CACA,iBAA8BZ,UAAU,CAACG,gBAAD,CAAxC,CAAOU,mBAAP,cAAOA,mBAAP,CACA,GAAMC,CAAAA,YAAqB,CAAGhB,KAAK,CAACiB,qBAAN,GAA8BC,KAA9B,CAAsC,CAApE,CACA,GAAMC,CAAAA,WAAoB,CACxB,CAACP,MAAM,CAACQ,gBAAR,EAA4BL,mBAAmB,EADjD,CAGAZ,SAAS,CAAC,UAAM,CACdW,QAAQ,CAAC,CAACO,UAAU,CAAE,IAAb,CAAD,CAAR,CACD,CAFQ,CAEN,EAFM,CAAT,CAEQ;AAER,GAAI,CAACF,WAAD,EAAgBH,YAAhB,EAAgCH,MAApC,CAA4C,CAC1C,mBAAO,oBAAC,cAAD,MAAP,CACD,CAED,mBAAO,oBAAC,aAAD,MAAP,CACD","sourcesContent":["// @ts-ignore - Dependency doesn't have a good @types\nimport Flash from 'swfobject';\nimport React, {useContext, useEffect} from 'react';\nimport {ClientWidgets} from '../../../widgets/ClientWidgets';\nimport {webSocketContext} from '../../../context/web-socket';\nimport {WebSocketError} from '../../../components/templates/error/WebSocketError';\nimport {\n  configContext,\n  sessionContext,\n  setURL,\n  themeContext,\n} from '@instinct-web/core';\n\nsetURL('play', <PlayPage />);\n\nexport function PlayPage() {\n  const {config} = useContext(configContext);\n  const {online} = useContext(sessionContext);\n  const {setStore} = useContext(themeContext);\n  const {getConnectionStatus} = useContext(webSocketContext);\n  const flashEnabled: boolean = Flash.getFlashPlayerVersion().major > 0;\n  const webStatusOK: boolean =\n    !config.websocketEnabled || getConnectionStatus();\n\n  useEffect(() => {\n    setStore({showClient: true});\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (!webStatusOK && flashEnabled && online) {\n    return <WebSocketError />;\n  }\n\n  return <ClientWidgets />;\n}\n"]},"metadata":{},"sourceType":"module"}