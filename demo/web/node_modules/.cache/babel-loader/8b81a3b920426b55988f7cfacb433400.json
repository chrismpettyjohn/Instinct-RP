{"ast":null,"code":"var _jsxFileName = \"/Users/chris/Projects/instinct/packages/@instinct-web/admin/src/news-articles/articles/editor/NewsArticleEditor.tsx\";\nimport { Link } from 'wouter';\nimport { toast } from 'react-toastify';\nimport React, { useState } from 'react';\nimport MDEditor from '@uiw/react-md-editor';\nimport { Card } from '../../../components/card/Card';\nimport { Jumbotron } from '../../../components/jumbotron/Jumbotron';\nimport { AdminLayout } from '../../../components/admin-layout/AdminLayout';\nimport { PreviewImage } from '../../../components/preview-image/PreviewImage';\nimport { Form, Icon, Input, Select, useFetchAllNewsCategories, Skeleton } from '@instinct-web/core';\nimport { defaultNewsArticleEditorState } from './NewsArticleEdtitor.types';\nexport function NewsArticleEditor({\n  defaultArticle,\n  onSave\n}) {\n  var _categories$find;\n\n  const categories = useFetchAllNewsCategories();\n  const [state, setState] = useState({ ...defaultNewsArticleEditorState,\n    article: defaultArticle !== null && defaultArticle !== void 0 ? defaultArticle : defaultNewsArticleEditorState.article\n  });\n\n  function setValue(key, value) {\n    setState(_ => ({ ..._,\n      [key]: value\n    }));\n  }\n\n  function setArticleValue(key, value) {\n    editArticle({\n      [key]: value\n    });\n  }\n\n  function editArticle(article) {\n    setState(_ => ({ ..._,\n      article: { ..._.article,\n        ...article\n      }\n    }));\n  }\n\n  async function onSubmit() {\n    setValue('showSpinner', true);\n\n    try {\n      await onSave({\n        title: state.article.title,\n        content: state.article.content,\n        description: state.article.description,\n        categoryID: state.article.category.id,\n        headerImage: state.article.headerImage,\n        thumbnailImage: state.article.thumbnailImage\n      });\n      toast.success('Your changes have been saved');\n      setValue('showSpinner', false);\n    } catch {\n      setState(_ => ({ ..._,\n        showError: true,\n        showSpinner: false\n      }));\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(AdminLayout, {\n    permission: \"websiteManageNews\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Jumbotron, {\n    style: {\n      background: '#263238',\n      backgroundImage: `url(${state.article.headerImage})`,\n      backgroundSize: '100%'\n    },\n    title: state.article.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, state.article.description)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/news/articles\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    className: \"text-white fa-2x\",\n    type: \"arrow-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Card, {\n    header: \"Editor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    className: \"\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    style: {\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    name: \"title\",\n    onChange: setArticleValue,\n    value: state.article.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    style: {\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    name: \"description\",\n    onChange: setArticleValue,\n    value: state.article.description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    style: {\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(Skeleton, {\n    isLoading: categories === undefined,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    options: categories,\n    value: (_categories$find = categories === null || categories === void 0 ? void 0 : categories.find(_ => _.id === state.article.category.id)) !== null && _categories$find !== void 0 ? _categories$find : null,\n    getOptionLabel: x => x.name,\n    getOptionValue: x => `${x.id}`,\n    onChange: _ => setArticleValue('category', _),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    style: {\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, \"Header\", /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(PreviewImage, {\n    className: \"ml-2\",\n    image: state.article.headerImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    name: \"headerImage\",\n    onChange: setArticleValue,\n    value: state.article.headerImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    style: {\n      padding: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, \"Thumbnail\", /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(PreviewImage, {\n    className: \"ml-2\",\n    image: state.article.thumbnailImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Input, {\n    type: \"text\",\n    name: \"thumbnailImage\",\n    onChange: setArticleValue,\n    value: state.article.thumbnailImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }, \"Content\"), /*#__PURE__*/React.createElement(MDEditor, {\n    value: state.article.content,\n    onChange: content => editArticle({\n      content\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }, \"\\xA0\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    disabled: state.showSpinner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, state.showSpinner ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }) : 'Save')))))));\n}","map":null,"metadata":{},"sourceType":"module"}