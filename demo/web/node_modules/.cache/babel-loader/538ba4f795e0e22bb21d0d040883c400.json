{"ast":null,"code":"var _jsxFileName = \"/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/business/BusinessEdit.tsx\";\nimport React from 'react';\nimport { toast } from 'react-toastify';\nimport { setURL, Icon } from '@instinct-web/core';\nimport { Link, useRoute } from 'wouter';\nimport { Row } from '../../components/generic/row/Row';\nimport { BusinessEditor } from './editor/BusinessEditor';\nimport { UserLayout } from '../../components/layout/user';\nimport { businessService } from '../../services/business';\nimport { useFetchBusinessByID } from '../../hooks/business';\nimport { Container } from '../../components/generic/container/Container';\nimport { RPPermissionGuard } from '../../components/templates/permission-guard';\nimport { MiniJumbotron } from '../../components/generic/mini-jumbotron/MiniJumbotron';\nsetURL('businesses/edit/:businessID', /*#__PURE__*/React.createElement(BusinessEdit, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 39\n  }\n}));\nexport function BusinessEdit() {\n  const [matched, params] = useRoute('/businesses/edit/:businessID');\n  const business = useFetchBusinessByID(params.businessID);\n\n  if (!business) {\n    return /*#__PURE__*/React.createElement(UserLayout, {\n      section: \"business\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(RPPermissionGuard, {\n      permission: \"websiteCreateBusiness\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"spinner fa-spin fa-3x\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 17\n      }\n    }, \"Loading Business\"))))));\n  }\n\n  const businessDTO = {\n    name: business.name,\n    desc: business.desc,\n    type: business.type,\n    badge: business.badge,\n    homeRoom: business.homeRoomID,\n    investment: 0,\n    positions: business.positions.map(businessPosition => ({\n      id: businessPosition.id,\n      order: businessPosition.order,\n      name: businessPosition.name,\n      maleUniform: businessPosition.maleUniform,\n      femaleUniform: businessPosition.femaleUniform,\n      shiftWage: businessPosition.shiftWage\n    }))\n  };\n\n  async function onSubmit(newBusinessDTO) {\n    try {\n      await businessService.delete(business.id.toString());\n      toast.success(`Your changes to ${newBusinessDTO.name} were saved successfully`);\n    } catch {\n      toast.error(`There was a problem when saving your changes to ${business.name}`);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(UserLayout, {\n    section: \"business\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(RPPermissionGuard, {\n    permission: \"websiteCreateBusiness\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/businesses\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    className: \"fa-4x text-white\",\n    style: {\n      cursor: 'pointer'\n    },\n    type: \"caret-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MiniJumbotron, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }, \"Business Editor\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, \"You are making changes to \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 44\n    }\n  }, business.name)))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(BusinessEditor, {\n    defaultBusiness: businessDTO,\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }))))));\n}","map":null,"metadata":{},"sourceType":"module"}