{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{toast}from'react-toastify';import React,{useState}from'react';import{Form,guestbookService,Icon,Loading}from'@instinct-web/core';import{FormGroup,Modal,ModalBody,ModalFooter,ModalHeader}from'reactstrap';export function CreatePostModal(_ref){var profileID=_ref.profileID,onCreation=_ref.onCreation;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),spinner=_useState2[0],setSpinner=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showModal=_useState6[0],setModal=_useState6[1];function onToggle(){setModal(function(_){return!_;});}function onSubmit(){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newPost;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setSpinner(true);_context.next=4;return guestbookService.create(profileID,{content:content});case 4:newPost=_context.sent;onCreation(newPost);setContent('');setSpinner(false);setModal(false);toast.info('Your comment has been posted!');_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setSpinner(false);toast.error(\"There was a problem and your comment couldn't be saved\");case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:onToggle},/*#__PURE__*/React.createElement(Icon,{type:\"plus-circle\"}),\"Post\"),/*#__PURE__*/React.createElement(Modal,{isOpen:showModal,toggle:onToggle},/*#__PURE__*/React.createElement(ModalHeader,{toggle:onToggle},\"Post to Guestbook\"),/*#__PURE__*/React.createElement(Form,{className:\"\",disabled:spinner,onSubmit:onSubmit},/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Loading,{isLoading:spinner},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(\"h4\",null,\"What do you want to say?\"),/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control\",rows:4,value:content,onChange:function onChange(e){return setContent(e.target.value);},maxLength:200})))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",disabled:spinner,type:\"submit\"},\"Create\")))));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/home/user-profile/guestbook/create-post-modal/CreatePostModal.tsx"],"names":["toast","React","useState","Form","guestbookService","Icon","Loading","FormGroup","Modal","ModalBody","ModalFooter","ModalHeader","CreatePostModal","profileID","onCreation","spinner","setSpinner","content","setContent","showModal","setModal","onToggle","_","onSubmit","create","newPost","info","error","e","target","value"],"mappings":"4bAAA,OAAQA,KAAR,KAAoB,gBAApB,CACA,MAAOC,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CAEA,OAAQC,IAAR,CAAcC,gBAAd,CAAgCC,IAAhC,CAAsCC,OAAtC,KAAoD,oBAApD,CACA,OACEC,SADF,CAEEC,KAFF,CAGEC,SAHF,CAIEC,WAJF,CAKEC,WALF,KAMO,YANP,CAQA,MAAO,SAASC,CAAAA,eAAT,MAAwE,IAA9CC,CAAAA,SAA8C,MAA9CA,SAA8C,CAAnCC,UAAmC,MAAnCA,UAAmC,CAC7E,cAA8BZ,QAAQ,CAAC,KAAD,CAAtC,wCAAOa,OAAP,eAAgBC,UAAhB,eACA,eAA8Bd,QAAQ,CAAC,EAAD,CAAtC,yCAAOe,OAAP,eAAgBC,UAAhB,eACA,eAA8BhB,QAAQ,CAAC,KAAD,CAAtC,yCAAOiB,SAAP,eAAkBC,QAAlB,eAEA,QAASC,CAAAA,QAAT,EAAoB,CAClBD,QAAQ,CAAC,SAAAE,CAAC,QAAI,CAACA,CAAL,EAAF,CAAR,CACD,CAP4E,QAS9DC,CAAAA,QAT8D,kIAS7E,+JAEIP,UAAU,CAAC,IAAD,CAAV,CAFJ,sBAG0BZ,CAAAA,gBAAgB,CAACoB,MAAjB,CAAwBX,SAAxB,CAAmC,CAACI,OAAO,CAAPA,OAAD,CAAnC,CAH1B,QAGUQ,OAHV,eAIIX,UAAU,CAACW,OAAD,CAAV,CACAP,UAAU,CAAC,EAAD,CAAV,CACAF,UAAU,CAAC,KAAD,CAAV,CACAI,QAAQ,CAAC,KAAD,CAAR,CACApB,KAAK,CAAC0B,IAAN,CAAW,+BAAX,EARJ,iFAUIV,UAAU,CAAC,KAAD,CAAV,CACAhB,KAAK,CAAC2B,KAAN,CAAY,wDAAZ,EAXJ,qEAT6E,2CAwB7E,mBACE,qDACE,8BAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAEN,QAA7C,eACE,oBAAC,IAAD,EAAM,IAAI,CAAC,aAAX,EADF,QADF,cAKE,oBAAC,KAAD,EAAO,MAAM,CAAEF,SAAf,CAA0B,MAAM,CAAEE,QAAlC,eACE,oBAAC,WAAD,EAAa,MAAM,CAAEA,QAArB,sBADF,cAEE,oBAAC,IAAD,EAAM,SAAS,CAAC,EAAhB,CAAmB,QAAQ,CAAEN,OAA7B,CAAsC,QAAQ,CAAEQ,QAAhD,eACE,oBAAC,SAAD,mBACE,oBAAC,OAAD,EAAS,SAAS,CAAER,OAApB,eACE,oBAAC,SAAD,mBACE,yDADF,cAEE,gCACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAE,CAFR,CAGE,KAAK,CAAEE,OAHT,CAIE,QAAQ,CAAE,kBAAAW,CAAC,QAAIV,CAAAA,UAAU,CAACU,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd,EAJb,CAKE,SAAS,CAAE,GALb,EAFF,CADF,CADF,CADF,cAeE,oBAAC,WAAD,mBACE,8BACE,SAAS,CAAC,iBADZ,CAEE,QAAQ,CAAEf,OAFZ,CAGE,IAAI,CAAC,QAHP,WADF,CAfF,CAFF,CALF,CADF,CAoCD","sourcesContent":["import {toast} from 'react-toastify';\nimport React, {useState} from 'react';\nimport {CreatePostModalProps} from './CreatePostModal.types';\nimport {Form, guestbookService, Icon, Loading} from '@instinct-web/core';\nimport {\n  FormGroup,\n  Modal,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n} from 'reactstrap';\n\nexport function CreatePostModal({profileID, onCreation}: CreatePostModalProps) {\n  const [spinner, setSpinner] = useState(false);\n  const [content, setContent] = useState('');\n  const [showModal, setModal] = useState(false);\n\n  function onToggle() {\n    setModal(_ => !_);\n  }\n\n  async function onSubmit() {\n    try {\n      setSpinner(true);\n      const newPost = await guestbookService.create(profileID, {content});\n      onCreation(newPost);\n      setContent('');\n      setSpinner(false);\n      setModal(false);\n      toast.info('Your comment has been posted!');\n    } catch {\n      setSpinner(false);\n      toast.error(\"There was a problem and your comment couldn't be saved\");\n    }\n  }\n\n  return (\n    <>\n      <button className=\"btn btn-primary\" onClick={onToggle}>\n        <Icon type=\"plus-circle\" />\n        Post\n      </button>\n      <Modal isOpen={showModal} toggle={onToggle}>\n        <ModalHeader toggle={onToggle}>Post to Guestbook</ModalHeader>\n        <Form className=\"\" disabled={spinner} onSubmit={onSubmit}>\n          <ModalBody>\n            <Loading isLoading={spinner}>\n              <FormGroup>\n                <h4>What do you want to say?</h4>\n                <textarea\n                  className=\"form-control\"\n                  rows={4}\n                  value={content}\n                  onChange={e => setContent(e.target.value)}\n                  maxLength={200}\n                />\n              </FormGroup>\n            </Loading>\n          </ModalBody>\n          <ModalFooter>\n            <button\n              className=\"btn btn-success\"\n              disabled={spinner}\n              type=\"submit\"\n            >\n              Create\n            </button>\n          </ModalFooter>\n        </Form>\n      </Modal>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}