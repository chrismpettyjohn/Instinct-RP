{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{toast}from'react-toastify';import React,{useContext,useState}from'react';import{Modal,ModalBody,ModalFooter,ModalHeader}from'reactstrap';import{guestbookService,Icon,sessionContext}from'@instinct-web/core';export function DeletePostModal(_ref){var post=_ref.post,onDeletion=_ref.onDeletion;var _useContext=useContext(sessionContext),user=_useContext.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setModal=_useState2[1];function onToggle(){setModal(function(_){return!_;});}function onSubmit(){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return guestbookService.delete(post.profileID,post.id);case 3:setModal(false);onDeletion(post.id);toast.info('Your comment has been deleted!');_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);toast.error(\"There was a problem and your comment couldn't be deleted\");case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _onSubmit.apply(this,arguments);}if(post.author.id!==user.id&&!user.rank.permissions.websiteManageGuestbook){return null;}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",{className:\"ml-2\",style:{cursor:'pointer'},onClick:onToggle},/*#__PURE__*/React.createElement(Icon,{className:\"text-danger\",type:\"trash\"})),/*#__PURE__*/React.createElement(Modal,{isOpen:showModal,toggle:onToggle},/*#__PURE__*/React.createElement(ModalHeader,{toggle:onToggle},\"Are You Sure?\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Are You Sure?\"),/*#__PURE__*/React.createElement(\"p\",null,\"You are about to delete your comment.\"),/*#__PURE__*/React.createElement(\"div\",{style:{background:'#001726',borderRadius:4,padding:15}},/*#__PURE__*/React.createElement(\"p\",null,\"\\\"\",post.content,\"\\\"\"))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",onClick:onSubmit},\"Yes, Delete Comment.\"))));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/home/user-profile/guestbook/delete-post-modal/DeletePostModal.tsx"],"names":["toast","React","useContext","useState","Modal","ModalBody","ModalFooter","ModalHeader","guestbookService","Icon","sessionContext","DeletePostModal","post","onDeletion","user","showModal","setModal","onToggle","_","onSubmit","delete","profileID","id","info","error","author","rank","permissions","websiteManageGuestbook","cursor","background","borderRadius","padding","content"],"mappings":"4bAAA,OAAQA,KAAR,KAAoB,gBAApB,CACA,MAAOC,CAAAA,KAAP,EAAeC,UAAf,CAA2BC,QAA3B,KAA0C,OAA1C,CAEA,OAAQC,KAAR,CAAeC,SAAf,CAA0BC,WAA1B,CAAuCC,WAAvC,KAAyD,YAAzD,CACA,OAAQC,gBAAR,CAA0BC,IAA1B,CAAgCC,cAAhC,KAAqD,oBAArD,CAEA,MAAO,SAASC,CAAAA,eAAT,MAAmE,IAAzCC,CAAAA,IAAyC,MAAzCA,IAAyC,CAAnCC,UAAmC,MAAnCA,UAAmC,CACxE,gBAAeX,UAAU,CAACQ,cAAD,CAAzB,CAAOI,IAAP,aAAOA,IAAP,CACA,cAA8BX,QAAQ,CAAC,KAAD,CAAtC,wCAAOY,SAAP,eAAkBC,QAAlB,eAEA,QAASC,CAAAA,QAAT,EAAoB,CAClBD,QAAQ,CAAC,SAAAE,CAAC,QAAI,CAACA,CAAL,EAAF,CAAR,CACD,CANuE,QAQzDC,CAAAA,QARyD,kIAQxE,yKAEUX,CAAAA,gBAAgB,CAACY,MAAjB,CAAwBR,IAAI,CAACS,SAA7B,CAAwCT,IAAI,CAACU,EAA7C,CAFV,QAGIN,QAAQ,CAAC,KAAD,CAAR,CACAH,UAAU,CAACD,IAAI,CAACU,EAAN,CAAV,CACAtB,KAAK,CAACuB,IAAN,CAAW,gCAAX,EALJ,+EAOIvB,KAAK,CAACwB,KAAN,CAAY,0DAAZ,EAPJ,oEARwE,2CAmBxE,GACEZ,IAAI,CAACa,MAAL,CAAYH,EAAZ,GAAmBR,IAAI,CAAEQ,EAAzB,EACA,CAACR,IAAI,CAAEY,IAAN,CAAYC,WAAZ,CAAwBC,sBAF3B,CAGE,CACA,MAAO,KAAP,CACD,CAED,mBACE,qDACE,4BAAM,SAAS,CAAC,MAAhB,CAAuB,KAAK,CAAE,CAACC,MAAM,CAAE,SAAT,CAA9B,CAAmD,OAAO,CAAEZ,QAA5D,eACE,oBAAC,IAAD,EAAM,SAAS,CAAC,aAAhB,CAA8B,IAAI,CAAC,OAAnC,EADF,CADF,cAIE,oBAAC,KAAD,EAAO,MAAM,CAAEF,SAAf,CAA0B,MAAM,CAAEE,QAAlC,eACE,oBAAC,WAAD,EAAa,MAAM,CAAEA,QAArB,kBADF,cAEE,oBAAC,SAAD,mBACE,8CADF,cAEE,qEAFF,cAGE,2BAAK,KAAK,CAAE,CAACa,UAAU,CAAE,SAAb,CAAwBC,YAAY,CAAE,CAAtC,CAAyCC,OAAO,CAAE,EAAlD,CAAZ,eACE,kCAAKpB,IAAI,CAACqB,OAAV,MADF,CAHF,CAFF,cASE,oBAAC,WAAD,mBACE,8BAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAEd,QAA7C,yBADF,CATF,CAJF,CADF,CAsBD","sourcesContent":["import {toast} from 'react-toastify';\nimport React, {useContext, useState} from 'react';\nimport {DeletePostModalProps} from './DeletePostModal.types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\nimport {guestbookService, Icon, sessionContext} from '@instinct-web/core';\n\nexport function DeletePostModal({post, onDeletion}: DeletePostModalProps) {\n  const {user} = useContext(sessionContext);\n  const [showModal, setModal] = useState(false);\n\n  function onToggle() {\n    setModal(_ => !_);\n  }\n\n  async function onSubmit() {\n    try {\n      await guestbookService.delete(post.profileID, post.id);\n      setModal(false);\n      onDeletion(post.id);\n      toast.info('Your comment has been deleted!');\n    } catch {\n      toast.error(\"There was a problem and your comment couldn't be deleted\");\n    }\n  }\n\n  if (\n    post.author.id !== user!.id &&\n    !user!.rank!.permissions.websiteManageGuestbook\n  ) {\n    return null;\n  }\n\n  return (\n    <>\n      <span className=\"ml-2\" style={{cursor: 'pointer'}} onClick={onToggle}>\n        <Icon className=\"text-danger\" type=\"trash\" />\n      </span>\n      <Modal isOpen={showModal} toggle={onToggle}>\n        <ModalHeader toggle={onToggle}>Are You Sure?</ModalHeader>\n        <ModalBody>\n          <h2>Are You Sure?</h2>\n          <p>You are about to delete your comment.</p>\n          <div style={{background: '#001726', borderRadius: 4, padding: 15}}>\n            <p>\"{post.content}\"</p>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-success\" onClick={onSubmit}>\n            Yes, Delete Comment.\n          </button>\n        </ModalFooter>\n      </Modal>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}