{"ast":null,"code":"var _jsxFileName = \"/Users/chris/Projects/instinct/packages/@instinct-theme/ares/src/pages/auth/login/Login.tsx\";\nimport './Login.scss';\nimport { Link, useLocation } from 'wouter';\nimport { GuestLayout } from '../../../components/layout/guest';\nimport React, { useContext, useState } from 'react';\nimport { defaultLoginState } from './Login.types';\nimport { configContext, sessionContext, sessionService, setURL } from '@instinct-web/core';\nimport { Carousel } from '../../../components/carousel/Carousel';\nimport { AutoPopulateUsernameField } from './auto-populate-username-field/AutoPopulateUsernameField';\nsetURL('login', /*#__PURE__*/React.createElement(Login, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 17\n  }\n}));\nexport function Login() {\n  const {\n    config\n  } = useContext(configContext);\n  const {\n    setUser\n  } = useContext(sessionContext);\n  const [, setLocation] = useLocation();\n  const [state, setState] = useState(defaultLoginState);\n  const disabled = state.username === '' || state.password === '' || state.showSpinner;\n\n  function onChange(key, value) {\n    setState(_ => ({ ..._,\n      [key]: value\n    }));\n  }\n\n  async function onSubmit(event) {\n    event.preventDefault();\n\n    try {\n      onChange('showSpinner', true);\n      onChange('showError', false);\n      const bearer = await sessionService.attemptCredentials(state.username, state.password);\n      const user = await sessionService.attemptBearerToken(bearer);\n      setUser(user);\n      setLocation('/me');\n    } catch (e) {\n      onChange('showError', true);\n    } finally {\n      onChange('showSpinner', false);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(GuestLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row h-100-vh justify-content-xxl-center justify-content-xl-center justify-content-md-center align-items-xxl-center align-items-xl-center align-items-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"main\", {\n    id: \"main\",\n    className: \"bg-dark no--sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-6 col-lg-6 col-md-12 col-sm-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container h-100 w-100 d-flex flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex h-100 flex-column justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex mb-3 mt-5 mt-xl-0 mt-lg-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: config.logoURL,\n    className: \"flex-fill\",\n    id: \"logo\",\n    alt: \"Logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AutoPopulateUsernameField, {\n    onChange: newUsername => onChange('username', newUsername),\n    username: state.username,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 23\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    className: \"form-control p-4\",\n    value: state.password,\n    onChange: e => onChange('password', e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-danger w-100 mt-2\",\n    type: \"submit\",\n    disabled: disabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-inline-flex justify-content-center mt-4 mt-xl-0 mt-lg-0 pb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    id: \"register-anchor\",\n    href: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, \"New Around Here?\", ' ', /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-2 text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 23\n    }\n  }, \"Join \", config.siteName)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-6 col-lg-6 d-xxl-block d-xl-block d-lg-block d-none bg-red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container d-flex h-100 flex-column justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Carousel, {\n    slides: [{\n      caption: 'rooms are here',\n      backgroundImage: 'https://i.imgur.com/rRGEOm1.png'\n    }, {\n      caption: 'vip rooms are here',\n      backgroundImage: 'https://i.imgur.com/3BHl0iB.png'\n    }, {\n      caption: 'more stuff is here',\n      backgroundImage: 'https://i.imgur.com/lsnkHZQ.png'\n    }],\n    slideClassName: \"p-5 text-center\",\n    slideStyle: {\n      height: 466\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  })))))));\n}","map":null,"metadata":{},"sourceType":"module"}