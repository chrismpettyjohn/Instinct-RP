{"ast":null,"code":"import _classCallCheck from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import EventEmitter from'events';import{ClientEvent}from'./';var ClientServiceImplementation=/*#__PURE__*/function(){// @ts-ignore - Unsure why this isn't working\nfunction ClientServiceImplementation(){var _this=this;_classCallCheck(this,ClientServiceImplementation);this.eventListener=new EventEmitter();if(window.FlashExternalInterface===undefined){window.FlashExternalInterface={};}window.FlashExternalInterface.logLoginStep=function(step){var stepToProgress={'client.init.swf.loaded':10,'client.init.core.init':25,'client.init.socket.ok':35,'client.init.handshake.start':45,'client.init.auth.ok':55,'client.init.localization.loaded':70,'client.init.core.running':85,'client.init.config.loaded':100};if(stepToProgress[step]){var _stepToProgress$step;var progress=(_stepToProgress$step=stepToProgress[step])!==null&&_stepToProgress$step!==void 0?_stepToProgress$step:0;_this.eventListener.emit(ClientEvent.LOADING_PROGRESS,progress);if(progress===100){_this.eventListener.emit(ClientEvent.ENTERED_HOTEL);}}};}_createClass(ClientServiceImplementation,[{key:\"enterRoom\",value:function enterRoom(roomID){return document.getElementById('client-area').openlink('navigator/goto/'+roomID);}}]);return ClientServiceImplementation;}();export var clientService=new ClientServiceImplementation();","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-web/core/src/services/client/Client.ts"],"names":["EventEmitter","ClientEvent","ClientServiceImplementation","eventListener","window","FlashExternalInterface","undefined","logLoginStep","step","stepToProgress","progress","emit","LOADING_PROGRESS","ENTERED_HOTEL","roomID","document","getElementById","openlink","clientService"],"mappings":"wSAAA,MAAOA,CAAAA,YAAP,KAAyB,QAAzB,CACA,OAAQC,WAAR,KAAyC,IAAzC,C,GAEMC,CAAAA,2B,yBACJ;AAGA,sCAAc,uEAFLC,aAEK,CAFW,GAAIH,CAAAA,YAAJ,EAEX,CACZ,GAAKI,MAAD,CAAgBC,sBAAhB,GAA2CC,SAA/C,CAA0D,CACvDF,MAAD,CAAgBC,sBAAhB,CAAyC,EAAzC,CACD,CAEAD,MAAD,CAAgBC,sBAAhB,CAAuCE,YAAvC,CAAsD,SACpDC,IADoD,CAE3C,CACT,GAAMC,CAAAA,cAAsC,CAAG,CAC7C,yBAA0B,EADmB,CAE7C,wBAAyB,EAFoB,CAG7C,wBAAyB,EAHoB,CAI7C,8BAA+B,EAJc,CAK7C,sBAAuB,EALsB,CAM7C,kCAAmC,EANU,CAO7C,2BAA4B,EAPiB,CAQ7C,4BAA6B,GARgB,CAA/C,CAWA,GAAIA,cAAc,CAACD,IAAD,CAAlB,CAA0B,0BACxB,GAAME,CAAAA,QAAgB,uBAAGD,cAAc,CAACD,IAAD,CAAjB,6DAA2B,CAAjD,CAEA,KAAI,CAACL,aAAL,CAAmBQ,IAAnB,CAAwBV,WAAW,CAACW,gBAApC,CAAsDF,QAAtD,EAEA,GAAIA,QAAQ,GAAK,GAAjB,CAAsB,CACpB,KAAI,CAACP,aAAL,CAAmBQ,IAAnB,CAAwBV,WAAW,CAACY,aAApC,EACD,CACF,CACF,CAvBD,CAwBD,C,iEAED,mBAAUC,MAAV,CAAgC,CAC9B,MAAQC,CAAAA,QAAD,CACJC,cADI,CACW,aADX,EAEJC,QAFI,CAEK,kBAAoBH,MAFzB,CAAP,CAGD,C,2CAGH,MAAO,IAAMI,CAAAA,aAA4B,CAAG,GAAIhB,CAAAA,2BAAJ,EAArC","sourcesContent":["import EventEmitter from 'events';\nimport {ClientEvent, ClientService} from './';\n\nclass ClientServiceImplementation implements ClientService {\n  // @ts-ignore - Unsure why this isn't working\n  readonly eventListener = new EventEmitter();\n\n  constructor() {\n    if ((window as any).FlashExternalInterface === undefined) {\n      (window as any).FlashExternalInterface = {};\n    }\n\n    (window as any).FlashExternalInterface.logLoginStep = (\n      step: string\n    ): void => {\n      const stepToProgress: Record<string, number> = {\n        'client.init.swf.loaded': 10,\n        'client.init.core.init': 25,\n        'client.init.socket.ok': 35,\n        'client.init.handshake.start': 45,\n        'client.init.auth.ok': 55,\n        'client.init.localization.loaded': 70,\n        'client.init.core.running': 85,\n        'client.init.config.loaded': 100,\n      };\n\n      if (stepToProgress[step]) {\n        const progress: number = stepToProgress[step] ?? 0;\n\n        this.eventListener.emit(ClientEvent.LOADING_PROGRESS, progress);\n\n        if (progress === 100) {\n          this.eventListener.emit(ClientEvent.ENTERED_HOTEL);\n        }\n      }\n    };\n  }\n\n  enterRoom(roomID: number): void {\n    return (document as any)\n      .getElementById('client-area')!\n      .openlink('navigator/goto/' + roomID);\n  }\n}\n\nexport const clientService: ClientService = new ClientServiceImplementation();\n"]},"metadata":{},"sourceType":"module"}