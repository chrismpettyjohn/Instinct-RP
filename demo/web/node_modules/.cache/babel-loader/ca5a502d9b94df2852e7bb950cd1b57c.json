{"ast":null,"code":"var _jsxFileName = \"/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/guides/GuideView.tsx\";\nimport Moment from 'moment';\nimport { Link, useRoute } from 'wouter';\nimport React, { useContext, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { guideService } from '../../services/guide';\nimport { Row } from '../../components/generic/row/Row';\nimport { Card } from '../../components/generic/card/Card';\nimport { UserLayout } from '../../components/layout/user';\nimport { Avatar, Icon, sessionContext, setURL } from '@instinct-web/core';\nimport { GuideReaction } from '@instinct-plugin/roleplay-types';\nimport { useFetchGuideByID } from '../../hooks/guide/fetch-guide-by-id';\nimport { Container } from '../../components/generic/container/Container';\nimport { MiniJumbotron } from '../../components/generic/mini-jumbotron/MiniJumbotron';\nsetURL('guides/view/:guideID', /*#__PURE__*/React.createElement(GuideEdit, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 32\n  }\n}));\nexport function GuideEdit() {\n  var _guide$reactions, _guide$reactions2, _guide$user, _guide$createdAt, _guide$updatedAt, _guide$reactions$filt, _guide$reactions3, _guide$reactions3$fil, _guide$reactions$filt2, _guide$reactions4, _guide$reactions4$fil;\n\n  const {\n    user\n  } = useContext(sessionContext);\n  const [refresh, setRefresh] = useState(0);\n  const [matched, params] = useRoute('/guides/view/:guideID');\n  const guide = useFetchGuideByID(params.guideID, refresh);\n\n  async function reactToGuide(reaction) {\n    await guideService.reactByID(params.guideID, reaction);\n    setRefresh(_ => _ + 1);\n  }\n\n  const [likedByUser, dislikedByUser] = [!!(guide === null || guide === void 0 ? void 0 : (_guide$reactions = guide.reactions) === null || _guide$reactions === void 0 ? void 0 : _guide$reactions.find(_ => _.user.id === (user === null || user === void 0 ? void 0 : user.id) && _.reaction === GuideReaction.Like)), !!(guide === null || guide === void 0 ? void 0 : (_guide$reactions2 = guide.reactions) === null || _guide$reactions2 === void 0 ? void 0 : _guide$reactions2.find(_ => _.user.id === (user === null || user === void 0 ? void 0 : user.id) && _.reaction === GuideReaction.Dislike))];\n  return /*#__PURE__*/React.createElement(UserLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8 d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/guides\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    className: \"fa-4x text-white\",\n    style: {\n      cursor: 'pointer'\n    },\n    type: \"caret-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-white ml-4\",\n    style: {\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, \"Viewing Guide: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 30\n    }\n  }, guide === null || guide === void 0 ? void 0 : guide.name))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, (guide === null || guide === void 0 ? void 0 : (_guide$user = guide.user) === null || _guide$user === void 0 ? void 0 : _guide$user.id) === user.id && /*#__PURE__*/React.createElement(Link, {\n    to: `/guides/edit/${guide === null || guide === void 0 ? void 0 : guide.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-outline-warning mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, \"Edit\")))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 19\n    }\n  }, \"Category:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  }, guide === null || guide === void 0 ? void 0 : guide.category.name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  }, \"Created At:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }, Moment.unix((_guide$createdAt = guide === null || guide === void 0 ? void 0 : guide.createdAt) !== null && _guide$createdAt !== void 0 ? _guide$createdAt : 0).format('MM/DD/YYYY'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 19\n    }\n  }, \"Last Updated:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 19\n    }\n  }, Moment.unix((_guide$updatedAt = guide === null || guide === void 0 ? void 0 : guide.updatedAt) !== null && _guide$updatedAt !== void 0 ? _guide$updatedAt : 0).format('MM/DD/YYYY'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 19\n    }\n  }, \"Author\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/profile/${guide === null || guide === void 0 ? void 0 : guide.user.username}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"member-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"member-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"member-avatar flex-container flex-vertical-center flex-horizontal-center\",\n    style: {\n      overflow: 'hidden'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    look: guide === null || guide === void 0 ? void 0 : guide.user.figure,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ml-2 mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 23\n    }\n  }, guide === null || guide === void 0 ? void 0 : guide.user.username), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 23\n    }\n  }, guide === null || guide === void 0 ? void 0 : guide.user.rank.name)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, \"Upvotes\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-success\",\n    style: {\n      cursor: 'pointer',\n      opacity: likedByUser ? 1 : 0.65\n    },\n    onClick: () => reactToGuide(GuideReaction.Like),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    type: \"thumbs-up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }), ' ', (_guide$reactions$filt = guide === null || guide === void 0 ? void 0 : (_guide$reactions3 = guide.reactions) === null || _guide$reactions3 === void 0 ? void 0 : (_guide$reactions3$fil = _guide$reactions3.filter(_ => _.reaction === GuideReaction.Like)) === null || _guide$reactions3$fil === void 0 ? void 0 : _guide$reactions3$fil.length) !== null && _guide$reactions$filt !== void 0 ? _guide$reactions$filt : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 36\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }, \"Downvotes\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger\",\n    style: {\n      cursor: 'pointer',\n      opacity: dislikedByUser ? 1 : 0.65\n    },\n    onClick: () => reactToGuide(GuideReaction.Dislike),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    type: \"thumbs-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }), ' ', (_guide$reactions$filt2 = guide === null || guide === void 0 ? void 0 : (_guide$reactions4 = guide.reactions) === null || _guide$reactions4 === void 0 ? void 0 : (_guide$reactions4$fil = _guide$reactions4.filter(_ => _.reaction === GuideReaction.Dislike)) === null || _guide$reactions4$fil === void 0 ? void 0 : _guide$reactions4$fil.length) !== null && _guide$reactions$filt2 !== void 0 ? _guide$reactions$filt2 : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 36\n    }\n  }))))))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MiniJumbotron, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, (guide === null || guide === void 0 ? void 0 : guide.content) ? /*#__PURE__*/React.createElement(ReactMarkdown, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 33\n    }\n  }, guide.content) : /*#__PURE__*/React.createElement(Icon, {\n    type: \"spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 82\n    }\n  }))))));\n}","map":null,"metadata":{},"sourceType":"module"}