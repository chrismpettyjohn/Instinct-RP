{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chris/Projects/instinct/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Spinner}from'reactstrap';import{toast}from'react-toastify';import{EditLaw}from'./edt-law/EditLaw';import{setURL}from'@instinct-web/core';import{Link,useLocation,useRoute}from'wouter';import{lawService}from'../../../services/law';import{useFetchLawByID}from'../../../hooks/law/fetch-law-by-id';import{RPPermissionGuard}from'../../../components/templates/permission-guard';import{Row}from'../../../components/generic/row/Row';import{UserLayout}from'../../../components/layout/user';import{Icon}from'../../../components/generic/icon/Icon';import{Container}from'../../../components/generic/container/Container';import{MiniJumbotron}from'../../../components/generic/mini-jumbotron/MiniJumbotron';setURL('government/laws/edit/:lawID',/*#__PURE__*/React.createElement(LawEditor,null));export function LawEditor(){var _useLocation=useLocation(),_useLocation2=_slicedToArray(_useLocation,2),location=_useLocation2[0],setLocation=_useLocation2[1];var _useRoute=useRoute('/government/laws/edit/:lawID'),_useRoute2=_slicedToArray(_useRoute,2),matched=_useRoute2[0],params=_useRoute2[1];var law=useFetchLawByID(params.lawID);if(law===undefined){return/*#__PURE__*/React.createElement(Spinner,null);}function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(lawDTO){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return lawService.updateByID(law.id,lawDTO);case 2:toast.success(\"Your changes to \".concat(lawDTO.title,\" have been saved\"));case 3:case\"end\":return _context.stop();}}},_callee);}));return _onSubmit.apply(this,arguments);}return/*#__PURE__*/React.createElement(UserLayout,{section:\"games_ranking\"},/*#__PURE__*/React.createElement(RPPermissionGuard,{permission:\"websiteProposeLaws\",redirect:true},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(Link,{to:\"/government/laws/view/\".concat(law.id)},/*#__PURE__*/React.createElement(Icon,{className:\"fa-4x text-white\",style:{cursor:'pointer'},type:\"caret-left\"})))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(MiniJumbotron,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Editing \",/*#__PURE__*/React.createElement(\"b\",{className:\"text-warning\"},law.title))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(EditLaw,{baseLawDTO:{title:law.title,description:law.description,content:law.content},onSubmit:onSubmit})))));}","map":{"version":3,"sources":["/Users/chris/Projects/instinct/packages/@instinct-theme/roleplay/src/pages/government/laws/LawEditor.tsx"],"names":["React","Spinner","toast","EditLaw","setURL","Link","useLocation","useRoute","lawService","useFetchLawByID","RPPermissionGuard","Row","UserLayout","Icon","Container","MiniJumbotron","LawEditor","location","setLocation","matched","params","law","lawID","undefined","onSubmit","lawDTO","updateByID","id","success","title","cursor","description","content"],"mappings":"4bAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,OAAR,KAAsB,YAAtB,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,OAAQC,OAAR,KAAsB,mBAAtB,CACA,OAAQC,MAAR,KAAqB,oBAArB,CACA,OAAQC,IAAR,CAAcC,WAAd,CAA2BC,QAA3B,KAA0C,QAA1C,CACA,OAAQC,UAAR,KAAyB,uBAAzB,CAEA,OAAQC,eAAR,KAA8B,oCAA9B,CACA,OAAQC,iBAAR,KAAgC,gDAAhC,CACA,OAAQC,GAAR,KAAkB,qCAAlB,CACA,OAAQC,UAAR,KAAyB,iCAAzB,CACA,OAAQC,IAAR,KAAmB,uCAAnB,CACA,OAAQC,SAAR,KAAwB,iDAAxB,CACA,OAAQC,aAAR,KAA4B,0DAA5B,CAEAX,MAAM,CAAC,6BAAD,cAAgC,oBAAC,SAAD,MAAhC,CAAN,CAEA,MAAO,SAASY,CAAAA,SAAT,EAAqB,CAC1B,iBAAgCV,WAAW,EAA3C,8CAAOW,QAAP,kBAAiBC,WAAjB,kBACA,cAA0BX,QAAQ,CAChC,8BADgC,CAAlC,wCAAOY,OAAP,eAAgBC,MAAhB,eAIA,GAAMC,CAAAA,GAAG,CAAGZ,eAAe,CAACW,MAAM,CAAEE,KAAT,CAA3B,CAEA,GAAID,GAAG,GAAKE,SAAZ,CAAuB,CACrB,mBAAO,oBAAC,OAAD,MAAP,CACD,CAVyB,QAYXC,CAAAA,QAZW,oIAY1B,iBAAwBC,MAAxB,wIACQjB,CAAAA,UAAU,CAACkB,UAAX,CAAsBL,GAAG,CAAEM,EAA3B,CAA+BF,MAA/B,CADR,QAEEvB,KAAK,CAAC0B,OAAN,2BAAiCH,MAAM,CAACI,KAAxC,sBAFF,sDAZ0B,2CAiB1B,mBACE,oBAAC,UAAD,EAAY,OAAO,CAAC,eAApB,eACE,oBAAC,iBAAD,EAAmB,UAAU,CAAC,oBAA9B,CAAmD,QAAQ,KAA3D,eACE,oBAAC,SAAD,mBACE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,IAAD,EAAM,EAAE,iCAA2BR,GAAG,CAACM,EAA/B,CAAR,eACE,oBAAC,IAAD,EACE,SAAS,CAAC,kBADZ,CAEE,KAAK,CAAE,CAACG,MAAM,CAAE,SAAT,CAFT,CAGE,IAAI,CAAC,YAHP,EADF,CADF,CADF,CADF,cAYE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,aAAD,mBACE,sDACU,yBAAG,SAAS,CAAC,cAAb,EAA6BT,GAAG,CAACQ,KAAjC,CADV,CADF,CADF,CADF,CAZF,cAqBE,oBAAC,GAAD,mBACE,oBAAC,OAAD,EACE,UAAU,CAAE,CACVA,KAAK,CAAER,GAAG,CAACQ,KADD,CAEVE,WAAW,CAAEV,GAAG,CAACU,WAFP,CAGVC,OAAO,CAAEX,GAAG,CAACW,OAHH,CADd,CAME,QAAQ,CAAER,QANZ,EADF,CArBF,CADF,CADF,CADF,CAsCD","sourcesContent":["import React from 'react';\nimport {Spinner} from 'reactstrap';\nimport {toast} from 'react-toastify';\nimport {EditLaw} from './edt-law/EditLaw';\nimport {setURL} from '@instinct-web/core';\nimport {Link, useLocation, useRoute} from 'wouter';\nimport {lawService} from '../../../services/law';\nimport {LawDTO} from '@instinct-plugin/roleplay-types';\nimport {useFetchLawByID} from '../../../hooks/law/fetch-law-by-id';\nimport {RPPermissionGuard} from '../../../components/templates/permission-guard';\nimport {Row} from '../../../components/generic/row/Row';\nimport {UserLayout} from '../../../components/layout/user';\nimport {Icon} from '../../../components/generic/icon/Icon';\nimport {Container} from '../../../components/generic/container/Container';\nimport {MiniJumbotron} from '../../../components/generic/mini-jumbotron/MiniJumbotron';\n\nsetURL('government/laws/edit/:lawID', <LawEditor />);\n\nexport function LawEditor() {\n  const [location, setLocation] = useLocation();\n  const [matched, params] = useRoute<{lawID: string}>(\n    '/government/laws/edit/:lawID'\n  );\n\n  const law = useFetchLawByID(params!.lawID);\n\n  if (law === undefined) {\n    return <Spinner />;\n  }\n\n  async function onSubmit(lawDTO: LawDTO) {\n    await lawService.updateByID(law!.id, lawDTO);\n    toast.success(`Your changes to ${lawDTO.title} have been saved`);\n  }\n\n  return (\n    <UserLayout section=\"games_ranking\">\n      <RPPermissionGuard permission=\"websiteProposeLaws\" redirect>\n        <Container>\n          <Row>\n            <div className=\"col-12\">\n              <Link to={`/government/laws/view/${law.id}`}>\n                <Icon\n                  className=\"fa-4x text-white\"\n                  style={{cursor: 'pointer'}}\n                  type=\"caret-left\"\n                />\n              </Link>\n            </div>\n          </Row>\n          <Row>\n            <div className=\"col-12\">\n              <MiniJumbotron>\n                <h1>\n                  Editing <b className=\"text-warning\">{law.title}</b>\n                </h1>\n              </MiniJumbotron>\n            </div>\n          </Row>\n          <Row>\n            <EditLaw\n              baseLawDTO={{\n                title: law.title,\n                description: law.description,\n                content: law.content,\n              }}\n              onSubmit={onSubmit}\n            />\n          </Row>\n        </Container>\n      </RPPermissionGuard>\n    </UserLayout>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}